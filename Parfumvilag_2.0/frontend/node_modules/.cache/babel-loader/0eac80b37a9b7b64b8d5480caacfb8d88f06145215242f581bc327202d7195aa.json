{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KomPhone\\\\Desktop\\\\Parfumvilag2.0\\\\Parfumvilag_2.0\\\\frontend\\\\src\\\\pages\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getUser, updateUser } from \"../services/userService\";\nimport { AuthContext } from \"../App\";\nimport placeholderImage from \"../assets/placeholder.png\"; // <<< Biztosítsd, hogy ez az útvonal helyes!\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    isLoggedIn,\n    user: contextUser,\n    login: contextLogin,\n    logout: contextLogout\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  // --- State Definitions ---\n  const [user, setUser] = useState(contextUser || null);\n  const [loading, setLoading] = useState(!contextUser);\n  const [updateLoading, setUpdateLoading] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [error, setError] = useState(\"\"); // General/Fetch error\n  const [updateError, setUpdateError] = useState(\"\"); // Update specific error\n  const [validationErrors, setValidationErrors] = useState({});\n  const [updateSuccess, setUpdateSuccess] = useState(\"\");\n\n  // Form state\n  const [newName, setNewName] = useState(\"\");\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\"); // For the input field during edit\n  const [profileImage, setProfileImage] = useState(\"\"); // For the displayed image\n\n  // --- Initialize Form ---\n  const initializeForm = useCallback(userData => {\n    if (!userData) return;\n    console.log(\"[initializeForm] Initializing form. Image URL:\", userData.profile_picture_url);\n    setNewName(userData.name || \"\");\n    setNewEmail(userData.email || \"\");\n    setPhoneNumber(userData.phone || \"\");\n    const currentImageUrl = userData.profile_picture_url || \"\";\n    setImageUrl(currentImageUrl); // Sync input field\n    setProfileImage(currentImageUrl); // Sync display image\n    setNewPassword(\"\");\n    setValidationErrors({});\n    setUpdateError(\"\");\n    setUpdateSuccess(\"\");\n  }, []);\n\n  // --- Fetch User ---\n  const fetchUser = useCallback(async (force = false) => {\n    if (!isLoggedIn) return null;\n    if (loading && !force) return user;\n    console.log(`[fetchUser] Attempting fetch... Force: ${force}`);\n    if (!force) setLoading(true);\n    setError(\"\");\n    try {\n      const userData = await getUser();\n      if (!userData) throw new Error(\"Nem érkeztek felhasználói adatok.\");\n      console.log(\"[fetchUser] Data received. Image URL:\", userData.profile_picture_url);\n      setUser(userData);\n      contextLogin(userData, localStorage.getItem(\"token\"));\n      // Initialize form only if NOT editing or if forced (after update)\n      if (!editing || force) {\n        initializeForm(userData);\n      }\n      if (!force) setLoading(false);\n      return userData;\n    } catch (err) {\n      var _err$response;\n      console.error(\"[fetchUser] Error:\", err);\n      setError(err.message || \"Profil betöltési hiba.\");\n      setUser(null);\n      if (err.message.includes(\"hitelesít\") || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n        contextLogout();\n        navigate(\"/bejelentkezes\");\n      }\n      if (!force) setLoading(false);\n      return null;\n    }\n  }, [isLoggedIn, user, loading, editing, contextLogin, contextLogout, navigate, initializeForm]);\n\n  // --- Initial Load Effect ---\n  useEffect(() => {\n    if (isLoggedIn) {\n      if (!user && !loading) {\n        // Fetch only if no user and not already loading\n        fetchUser();\n      } else if (user && !editing) {\n        // Sync form if user exists and not editing\n        initializeForm(user);\n        if (loading) setLoading(false); // Ensure loading stops\n      }\n    } else if (!loading) {\n      // If not logged in and not loading\n      // Optional: redirect to login if profile is protected\n      navigate(\"/bejelentkezes\");\n    }\n  }, [isLoggedIn, user, editing, loading, fetchUser, initializeForm, navigate]);\n\n  // --- Validation ---\n  const validateForm = useCallback(() => {\n    // ... validation logic ...\n    const errors = {};\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\n    if (!newEmail.trim()) {\n      errors.email = \"Email cím megadása kötelező!\";\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\n      errors.email = \"Érvénytelen email cím formátum!\";\n    }\n    if (newPassword && newPassword.length < 6) {\n      errors.password = \"Jelszó min. 6 karakter!\";\n    }\n    if (phoneNumber && phoneNumber.trim() && !/^\\+?[0-9\\s-()]{7,}$/.test(phoneNumber)) {\n      errors.phoneNumber = \"Érvénytelen telefonszám!\";\n    }\n    const trimmedImageUrl = imageUrl.trim();\n    if (trimmedImageUrl && !/^https?:\\/\\/.+\\..+/i.test(trimmedImageUrl)) {\n      errors.imageUrl = \"Érvénytelen URL (http(s)://...)!\";\n    }\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\n\n  // --- Handle Update ---\n  const handleEdit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setUpdateLoading(true);\n    setUpdateError(\"\");\n    setUpdateSuccess(\"\");\n    setValidationErrors({}); // Clear previous validation errors\n\n    const dataToUpdate = {\n      name: newName.trim(),\n      email: newEmail.trim(),\n      phone: phoneNumber.trim() || null,\n      profile_picture_url: imageUrl.trim() || null\n    };\n    if (newPassword.trim()) {\n      dataToUpdate.password = newPassword.trim();\n    }\n    try {\n      console.log(\"[handleEdit] Calling updateUser with:\", dataToUpdate);\n      // A backend most már visszaadja a frissített user objektumot a 'user' kulcs alatt\n      const response = await updateUser(dataToUpdate); // Call the service\n\n      if (response && response.success && response.user) {\n        console.log(\"[handleEdit] Update successful. Received user:\", response.user);\n\n        // 1. Update local state immediately\n        setUser(response.user);\n\n        // 2. Update context\n        contextLogin(response.user, localStorage.getItem(\"token\")); // Update context with fresh data\n\n        // 3. Reset form fields based on the NEW data\n        initializeForm(response.user); // Initialize form with the data we just received\n\n        // 4. Exit edit mode\n        setEditing(false);\n\n        // 5. Show success message\n        setUpdateSuccess(\"Adatok sikeresen frissítve!\");\n        setTimeout(() => setUpdateSuccess(\"\"), 4000);\n      } else {\n        // Handle cases where backend responds but not with expected data\n        throw new Error((response === null || response === void 0 ? void 0 : response.error) || \"Ismeretlen hiba a frissítés után.\");\n      }\n    } catch (err) {\n      console.error(\"[handleEdit] Error during update:\", err);\n      // Display specific error from backend if available\n      setUpdateError(err.message || \"Hiba történt a mentés során.\");\n      // Potentially check for specific validation errors from backend here if needed\n      // Example: if (err.response?.data?.errors) setValidationErrors(err.response.data.errors);\n    } finally {\n      console.log(\"[handleEdit] Setting updateLoading to false.\");\n      setUpdateLoading(false); // <<< Ez a legfontosabb a finally-ban\n    }\n  };\n\n  // --- Logout ---\n  const handleLogout = () => {\n    /* ... */\n  };\n  // --- Cancel Edit ---\n  const handleCancelEdit = () => {\n    setEditing(false);\n    if (user) {\n      initializeForm(user);\n    } // Reset form\n    setUpdateError(\"\");\n    setValidationErrors({});\n    setUpdateSuccess(\"\");\n    setError(\"\");\n  };\n\n  // --- Render Logic ---\n  if (loading) {\n    /* ... Spinner ... */\n  }\n  if (!user) {\n    /* ... Error/Login prompt ... */\n  }\n\n  // --- Main Profile Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"profile-title mb-4\",\n        children: \"Profil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), updateSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        children: updateSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this), updateError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: updateError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }, this), error && !editing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-image-section\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            // Itt a 'profileImage' state-et használjuk, amit az initializeForm frissít\n            src: profileImage || placeholderImage,\n            alt: `${(user === null || user === void 0 ? void 0 : user.name) || \"Felhasználó\"} profilképe`,\n            className: \"profile-image\",\n            // Segít a frissítésben\n            onError: e => {\n              console.warn(\"Image onError triggered for src:\", e.target.src);\n              e.target.onerror = null;\n              e.target.src = placeholderImage;\n            }\n          }, profileImage, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"profile-subtitle mb-3\",\n          children: \"Felhaszn\\xE1l\\xF3i adatok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), !editing ?\n        /*#__PURE__*/\n        // --- Display Mode ---\n        _jsxDEV(\"div\", {\n          className: \"profile-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"N\\xE9v:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), \" \", user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), \" \", user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Telefonsz\\xE1m:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), \" \", user.phone || \"Nincs megadva\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Regisztr\\xE1ci\\xF3:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), \" \", user.created_at ? new Date(user.created_at).toLocaleDateString(\"hu-HU\") : \"Ismeretlen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-actions mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-primary\",\n              onClick: () => setEditing(true),\n              disabled: updateLoading,\n              children: \"Adatok szerkeszt\\xE9se\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-danger ms-2\",\n              onClick: handleLogout,\n              disabled: updateLoading,\n              children: \"Kil\\xE9p\\xE9s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this) :\n        /*#__PURE__*/\n        // --- Editing Mode ---\n        _jsxDEV(\"form\", {\n          id: \"profileForm\",\n          onSubmit: handleEdit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editName\",\n              className: \"form-label\",\n              children: \"N\\xE9v\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: `form-control ${validationErrors.name ? \"is-invalid\" : \"\"}`,\n              id: \"editName\",\n              value: newName,\n              onChange: e => setNewName(e.target.value),\n              required: true,\n              disabled: updateLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this), validationErrors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: validationErrors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editEmail\",\n              className: \"form-label\",\n              children: \"Email c\\xEDm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: `form-control ${validationErrors.email ? \"is-invalid\" : \"\"}`,\n              id: \"editEmail\",\n              value: newEmail,\n              onChange: e => setNewEmail(e.target.value),\n              required: true,\n              disabled: updateLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this), validationErrors.email && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: validationErrors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editPhoneNumber\",\n              className: \"form-label\",\n              children: \"Telefonsz\\xE1m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              className: `form-control ${validationErrors.phoneNumber ? \"is-invalid\" : \"\"}`,\n              id: \"editPhoneNumber\",\n              value: phoneNumber,\n              onChange: e => setPhoneNumber(e.target.value),\n              placeholder: \"Opcion\\xE1lis\",\n              disabled: updateLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), validationErrors.phoneNumber && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: validationErrors.phoneNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"profileImageUrl\",\n              className: \"form-label\",\n              children: \"Profilk\\xE9p URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: `form-control ${validationErrors.imageUrl ? \"is-invalid\" : \"\"}`,\n              id: \"profileImageUrl\",\n              value: imageUrl // Input state-et használ\n              // Csak az input state-et frissíti, a megjelenített képet nem!\n              ,\n              onChange: e => setImageUrl(e.target.value),\n              placeholder: \"K\\xE9p URL-je (pl. https://...)\",\n              \"aria-describedby\": \"imageUrlError\",\n              disabled: updateLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), validationErrors.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"imageUrlError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.imageUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editPassword\",\n              className: \"form-label\",\n              children: \"\\xDAj jelsz\\xF3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: `form-control ${validationErrors.password ? \"is-invalid\" : \"\"}`,\n              id: \"editPassword\",\n              value: newPassword,\n              onChange: e => setNewPassword(e.target.value),\n              placeholder: \"\\xDCresen hagyva nem v\\xE1ltozik\",\n              disabled: updateLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), validationErrors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: validationErrors.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-actions mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: updateLoading,\n              children: updateLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-border spinner-border-sm me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 23\n                }, this), \"Ment\\xE9s...\"]\n              }, void 0, true) : \"Mentés\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-outline-secondary ms-2\",\n              onClick: handleCancelEdit,\n              disabled: updateLoading,\n              children: \"M\\xE9gse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"Ndue2LRuDb8V/j6zLnQPVBkYjMk=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","useNavigate","getUser","updateUser","AuthContext","placeholderImage","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","isLoggedIn","user","contextUser","login","contextLogin","logout","contextLogout","navigate","setUser","loading","setLoading","updateLoading","setUpdateLoading","editing","setEditing","error","setError","updateError","setUpdateError","validationErrors","setValidationErrors","updateSuccess","setUpdateSuccess","newName","setNewName","newEmail","setNewEmail","newPassword","setNewPassword","phoneNumber","setPhoneNumber","imageUrl","setImageUrl","profileImage","setProfileImage","initializeForm","userData","console","log","profile_picture_url","name","email","phone","currentImageUrl","fetchUser","force","Error","localStorage","getItem","err","_err$response","message","includes","response","status","validateForm","errors","trim","test","length","password","trimmedImageUrl","Object","keys","handleEdit","e","preventDefault","dataToUpdate","success","setTimeout","handleLogout","handleCancelEdit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onError","warn","target","onerror","created_at","Date","toLocaleDateString","onClick","disabled","id","onSubmit","htmlFor","type","value","onChange","required","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/KomPhone/Desktop/Parfumvilag2.0/Parfumvilag_2.0/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getUser, updateUser } from \"../services/userService\";\r\nimport { AuthContext } from \"../App\";\r\nimport placeholderImage from \"../assets/placeholder.png\"; // <<< Biztosítsd, hogy ez az útvonal helyes!\r\n\r\nconst Profile = () => {\r\n  const {\r\n    isLoggedIn,\r\n    user: contextUser,\r\n    login: contextLogin,\r\n    logout: contextLogout,\r\n  } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  // --- State Definitions ---\r\n  const [user, setUser] = useState(contextUser || null);\r\n  const [loading, setLoading] = useState(!contextUser);\r\n  const [updateLoading, setUpdateLoading] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n  const [error, setError] = useState(\"\"); // General/Fetch error\r\n  const [updateError, setUpdateError] = useState(\"\"); // Update specific error\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n  const [updateSuccess, setUpdateSuccess] = useState(\"\");\r\n\r\n  // Form state\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(\"\"); // For the input field during edit\r\n  const [profileImage, setProfileImage] = useState(\"\"); // For the displayed image\r\n\r\n  // --- Initialize Form ---\r\n  const initializeForm = useCallback((userData) => {\r\n    if (!userData) return;\r\n    console.log(\r\n      \"[initializeForm] Initializing form. Image URL:\",\r\n      userData.profile_picture_url\r\n    );\r\n    setNewName(userData.name || \"\");\r\n    setNewEmail(userData.email || \"\");\r\n    setPhoneNumber(userData.phone || \"\");\r\n    const currentImageUrl = userData.profile_picture_url || \"\";\r\n    setImageUrl(currentImageUrl); // Sync input field\r\n    setProfileImage(currentImageUrl); // Sync display image\r\n    setNewPassword(\"\");\r\n    setValidationErrors({});\r\n    setUpdateError(\"\");\r\n    setUpdateSuccess(\"\");\r\n  }, []);\r\n\r\n  // --- Fetch User ---\r\n  const fetchUser = useCallback(\r\n    async (force = false) => {\r\n      if (!isLoggedIn) return null;\r\n      if (loading && !force) return user;\r\n\r\n      console.log(`[fetchUser] Attempting fetch... Force: ${force}`);\r\n      if (!force) setLoading(true);\r\n      setError(\"\");\r\n      try {\r\n        const userData = await getUser();\r\n        if (!userData) throw new Error(\"Nem érkeztek felhasználói adatok.\");\r\n        console.log(\r\n          \"[fetchUser] Data received. Image URL:\",\r\n          userData.profile_picture_url\r\n        );\r\n\r\n        setUser(userData);\r\n        contextLogin(userData, localStorage.getItem(\"token\"));\r\n        // Initialize form only if NOT editing or if forced (after update)\r\n        if (!editing || force) {\r\n          initializeForm(userData);\r\n        }\r\n\r\n        if (!force) setLoading(false);\r\n        return userData;\r\n      } catch (err) {\r\n        console.error(\"[fetchUser] Error:\", err);\r\n        setError(err.message || \"Profil betöltési hiba.\");\r\n        setUser(null);\r\n        if (err.message.includes(\"hitelesít\") || err.response?.status === 401) {\r\n          contextLogout();\r\n          navigate(\"/bejelentkezes\");\r\n        }\r\n        if (!force) setLoading(false);\r\n        return null;\r\n      }\r\n    },\r\n    [\r\n      isLoggedIn,\r\n      user,\r\n      loading,\r\n      editing,\r\n      contextLogin,\r\n      contextLogout,\r\n      navigate,\r\n      initializeForm,\r\n    ]\r\n  );\r\n\r\n  // --- Initial Load Effect ---\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      if (!user && !loading) {\r\n        // Fetch only if no user and not already loading\r\n        fetchUser();\r\n      } else if (user && !editing) {\r\n        // Sync form if user exists and not editing\r\n        initializeForm(user);\r\n        if (loading) setLoading(false); // Ensure loading stops\r\n      }\r\n    } else if (!loading) {\r\n      // If not logged in and not loading\r\n      // Optional: redirect to login if profile is protected\r\n      navigate(\"/bejelentkezes\");\r\n    }\r\n  }, [isLoggedIn, user, editing, loading, fetchUser, initializeForm, navigate]);\r\n\r\n  // --- Validation ---\r\n  const validateForm = useCallback(() => {\r\n    // ... validation logic ...\r\n    const errors = {};\r\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\r\n    if (!newEmail.trim()) {\r\n      errors.email = \"Email cím megadása kötelező!\";\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\r\n      errors.email = \"Érvénytelen email cím formátum!\";\r\n    }\r\n    if (newPassword && newPassword.length < 6) {\r\n      errors.password = \"Jelszó min. 6 karakter!\";\r\n    }\r\n    if (\r\n      phoneNumber &&\r\n      phoneNumber.trim() &&\r\n      !/^\\+?[0-9\\s-()]{7,}$/.test(phoneNumber)\r\n    ) {\r\n      errors.phoneNumber = \"Érvénytelen telefonszám!\";\r\n    }\r\n    const trimmedImageUrl = imageUrl.trim();\r\n    if (trimmedImageUrl && !/^https?:\\/\\/.+\\..+/i.test(trimmedImageUrl)) {\r\n      errors.imageUrl = \"Érvénytelen URL (http(s)://...)!\";\r\n    }\r\n    setValidationErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\r\n\r\n  // --- Handle Update ---\r\n  const handleEdit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    setUpdateLoading(true);\r\n    setUpdateError(\"\");\r\n    setUpdateSuccess(\"\");\r\n    setValidationErrors({}); // Clear previous validation errors\r\n\r\n    const dataToUpdate = {\r\n      name: newName.trim(),\r\n      email: newEmail.trim(),\r\n      phone: phoneNumber.trim() || null,\r\n      profile_picture_url: imageUrl.trim() || null,\r\n    };\r\n    if (newPassword.trim()) {\r\n      dataToUpdate.password = newPassword.trim();\r\n    }\r\n\r\n    try {\r\n      console.log(\"[handleEdit] Calling updateUser with:\", dataToUpdate);\r\n      // A backend most már visszaadja a frissített user objektumot a 'user' kulcs alatt\r\n      const response = await updateUser(dataToUpdate); // Call the service\r\n\r\n      if (response && response.success && response.user) {\r\n        console.log(\r\n          \"[handleEdit] Update successful. Received user:\",\r\n          response.user\r\n        );\r\n\r\n        // 1. Update local state immediately\r\n        setUser(response.user);\r\n\r\n        // 2. Update context\r\n        contextLogin(response.user, localStorage.getItem(\"token\")); // Update context with fresh data\r\n\r\n        // 3. Reset form fields based on the NEW data\r\n        initializeForm(response.user); // Initialize form with the data we just received\r\n\r\n        // 4. Exit edit mode\r\n        setEditing(false);\r\n\r\n        // 5. Show success message\r\n        setUpdateSuccess(\"Adatok sikeresen frissítve!\");\r\n        setTimeout(() => setUpdateSuccess(\"\"), 4000);\r\n      } else {\r\n        // Handle cases where backend responds but not with expected data\r\n        throw new Error(response?.error || \"Ismeretlen hiba a frissítés után.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[handleEdit] Error during update:\", err);\r\n      // Display specific error from backend if available\r\n      setUpdateError(err.message || \"Hiba történt a mentés során.\");\r\n      // Potentially check for specific validation errors from backend here if needed\r\n      // Example: if (err.response?.data?.errors) setValidationErrors(err.response.data.errors);\r\n    } finally {\r\n      console.log(\"[handleEdit] Setting updateLoading to false.\");\r\n      setUpdateLoading(false); // <<< Ez a legfontosabb a finally-ban\r\n    }\r\n  };\r\n\r\n  // --- Logout ---\r\n  const handleLogout = () => {\r\n    /* ... */\r\n  };\r\n  // --- Cancel Edit ---\r\n  const handleCancelEdit = () => {\r\n    setEditing(false);\r\n    if (user) {\r\n      initializeForm(user);\r\n    } // Reset form\r\n    setUpdateError(\"\");\r\n    setValidationErrors({});\r\n    setUpdateSuccess(\"\");\r\n    setError(\"\");\r\n  };\r\n\r\n  // --- Render Logic ---\r\n  if (loading) {\r\n    /* ... Spinner ... */\r\n  }\r\n  if (!user) {\r\n    /* ... Error/Login prompt ... */\r\n  }\r\n\r\n  // --- Main Profile Render ---\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <div className=\"profile-card\">\r\n        <h1 className=\"profile-title mb-4\">Profil</h1>\r\n        {/* Messages */}\r\n        {updateSuccess && (\r\n          <div className=\"alert alert-success\">{updateSuccess}</div>\r\n        )}\r\n        {updateError && <div className=\"alert alert-danger\">{updateError}</div>}\r\n        {error && !editing && (\r\n          <div className=\"alert alert-warning\">{error}</div>\r\n        )}\r\n\r\n        <div className=\"profile-content\">\r\n          {/* Image Section */}\r\n          <div className=\"profile-image-section\">\r\n            <img\r\n              // Itt a 'profileImage' state-et használjuk, amit az initializeForm frissít\r\n              src={profileImage || placeholderImage}\r\n              alt={`${user?.name || \"Felhasználó\"} profilképe`}\r\n              className=\"profile-image\"\r\n              key={profileImage} // Segít a frissítésben\r\n              onError={(e) => {\r\n                console.warn(\"Image onError triggered for src:\", e.target.src);\r\n                e.target.onerror = null;\r\n                e.target.src = placeholderImage;\r\n              }}\r\n            />\r\n            {/* A KÉP URL INPUT MEZŐ CSAK SZERKESZTÉSKOR LÁTSZIK */}\r\n            {/* Ez már a form tagen BELÜL van lejjebb */}\r\n          </div>\r\n\r\n          {/* Details / Form Section */}\r\n          <h3 className=\"profile-subtitle mb-3\">Felhasználói adatok</h3>\r\n          {!editing ? (\r\n            // --- Display Mode ---\r\n            <div className=\"profile-details\">\r\n              {/* ... user data display ... */}\r\n              <p>\r\n                <strong>Név:</strong> {user.name}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong> {user.email}\r\n              </p>\r\n              <p>\r\n                <strong>Telefonszám:</strong> {user.phone || \"Nincs megadva\"}\r\n              </p>\r\n              <p>\r\n                <strong>Regisztráció:</strong>{\" \"}\r\n                {user.created_at\r\n                  ? new Date(user.created_at).toLocaleDateString(\"hu-HU\")\r\n                  : \"Ismeretlen\"}\r\n              </p>\r\n              <div className=\"profile-actions mt-4\">\r\n                <button\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={() => setEditing(true)}\r\n                  disabled={updateLoading}\r\n                >\r\n                  Adatok szerkesztése\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-danger ms-2\"\r\n                  onClick={handleLogout}\r\n                  disabled={updateLoading}\r\n                >\r\n                  Kilépés\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            // --- Editing Mode ---\r\n            <form id=\"profileForm\" onSubmit={handleEdit}>\r\n              {/* Name */}\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editName\" className=\"form-label\">\r\n                  Név\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`form-control ${\r\n                    validationErrors.name ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editName\"\r\n                  value={newName}\r\n                  onChange={(e) => setNewName(e.target.value)}\r\n                  required\r\n                  disabled={updateLoading}\r\n                />\r\n                {validationErrors.name && (\r\n                  <div className=\"invalid-feedback\">\r\n                    {validationErrors.name}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* Email */}\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editEmail\" className=\"form-label\">\r\n                  Email cím\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className={`form-control ${\r\n                    validationErrors.email ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editEmail\"\r\n                  value={newEmail}\r\n                  onChange={(e) => setNewEmail(e.target.value)}\r\n                  required\r\n                  disabled={updateLoading}\r\n                />\r\n                {validationErrors.email && (\r\n                  <div className=\"invalid-feedback\">\r\n                    {validationErrors.email}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* Phone */}\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editPhoneNumber\" className=\"form-label\">\r\n                  Telefonszám\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  className={`form-control ${\r\n                    validationErrors.phoneNumber ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editPhoneNumber\"\r\n                  value={phoneNumber}\r\n                  onChange={(e) => setPhoneNumber(e.target.value)}\r\n                  placeholder=\"Opcionális\"\r\n                  disabled={updateLoading}\r\n                />\r\n                {validationErrors.phoneNumber && (\r\n                  <div className=\"invalid-feedback\">\r\n                    {validationErrors.phoneNumber}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* === JAVÍTOTT KÉP URL INPUT HELYE === */}\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"profileImageUrl\" className=\"form-label\">\r\n                  Profilkép URL\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`form-control ${\r\n                    validationErrors.imageUrl ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"profileImageUrl\"\r\n                  value={imageUrl} // Input state-et használ\r\n                  // Csak az input state-et frissíti, a megjelenített képet nem!\r\n                  onChange={(e) => setImageUrl(e.target.value)}\r\n                  placeholder=\"Kép URL-je (pl. https://...)\"\r\n                  aria-describedby=\"imageUrlError\"\r\n                  disabled={updateLoading}\r\n                />\r\n                {validationErrors.imageUrl && (\r\n                  <div id=\"imageUrlError\" className=\"invalid-feedback\">\r\n                    {validationErrors.imageUrl}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* Password */}\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editPassword\" className=\"form-label\">\r\n                  Új jelszó\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  className={`form-control ${\r\n                    validationErrors.password ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editPassword\"\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                  placeholder=\"Üresen hagyva nem változik\"\r\n                  disabled={updateLoading}\r\n                />\r\n                {validationErrors.password && (\r\n                  <div className=\"invalid-feedback\">\r\n                    {validationErrors.password}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Buttons */}\r\n              <div className=\"profile-actions mt-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary\"\r\n                  disabled={updateLoading}\r\n                >\r\n                  {updateLoading ? (\r\n                    <>\r\n                      <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n                      Mentés...\r\n                    </>\r\n                  ) : (\r\n                    \"Mentés\"\r\n                  )}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-outline-secondary ms-2\"\r\n                  onClick={handleCancelEdit}\r\n                  disabled={updateLoading}\r\n                >\r\n                  Mégse\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}