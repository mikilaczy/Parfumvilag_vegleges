{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KomPhone\\\\Desktop\\\\Parfumvilag2.0\\\\Parfumvilag_2.0\\\\frontend\\\\src\\\\pages\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getUser, updateUser } from \"../services/userService\";\nimport { AuthContext } from \"../App\";\n//import placeholderImage from \"../assets/placeholder.png\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst placeholderImage = \"https://via.placeholder.com/150\";\nconst Profile = () => {\n  _s();\n  // --- Context and Navigation ---\n  const {\n    isLoggedIn,\n    user: contextUser,\n    login: contextLogin,\n    logout: contextLogout\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  // --- State Definitions ---\n  const [user, setUser] = useState(contextUser || null); // Use context user as initial state\n  const [loading, setLoading] = useState(!contextUser); // Only load initially if no context user\n  const [updateLoading, setUpdateLoading] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [updateError, setUpdateError] = useState(\"\");\n  const [validationErrors, setValidationErrors] = useState({});\n  const [updateSuccess, setUpdateSuccess] = useState(\"\");\n\n  // --- Form State ---\n  const [newName, setNewName] = useState(\"\");\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\"); // Input field value\n  // ProfileImage state is removed, we'll derive src directly from `user` state or placeholder\n\n  // --- Initialize Form (Memoized) ---\n  // This function now ONLY sets form fields based on passed data\n  const initializeForm = useCallback(userData => {\n    if (!userData) {\n      console.warn(\"[initializeForm] No user data provided.\");\n      // Optionally reset form fields to empty if no user data\n      setNewName(\"\");\n      setNewEmail(\"\");\n      setPhoneNumber(\"\");\n      setImageUrl(\"\");\n      setNewPassword(\"\");\n      return;\n    }\n    console.log(\"[initializeForm] Initializing form state from userData:\", userData);\n    setNewName(userData.name || \"\");\n    setNewEmail(userData.email || \"\");\n    setPhoneNumber(userData.phone || \"\");\n    const currentImageUrl = userData.profile_picture_url || \"\";\n    setImageUrl(currentImageUrl); // Set input value\n    // No need for separate profileImage state anymore\n    setNewPassword(\"\"); // Always clear password field\n    setValidationErrors({});\n    setUpdateError(\"\");\n    setUpdateSuccess(\"\");\n  }, []); // No external dependencies needed for the function logic itself\n\n  // --- Fetch User Data (Memoized) ---\n  // This function fetches data and updates user state and context\n  const fetchUserData = useCallback(async () => {\n    console.log(\"[fetchUserData] Attempting to fetch...\");\n    setLoading(true);\n    setError(\"\");\n    try {\n      const fetchedData = await getUser();\n      if (!fetchedData) throw new Error(\"Nem érkeztek felhasználói adatok.\");\n      console.log(\"[fetchUserData] Success:\", fetchedData);\n\n      // Update local state and context\n      setUser(fetchedData);\n      contextLogin(fetchedData, localStorage.getItem(\"token\"));\n      // Initialize form fields AFTER setting user state\n      // initializeForm(fetchedData); // Moved initialization to useEffect\n    } catch (err) {\n      var _err$message, _err$response, _err$response2, _err$response2$data, _err$response2$data$e;\n      console.error(\"[fetchUserData] Error:\", err);\n      setError(err.message || \"Profil betöltési hiba.\");\n      if ((_err$message = err.message) !== null && _err$message !== void 0 && _err$message.includes(\"hitelesít\") || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 || (_err$response2 = err.response) !== null && _err$response2 !== void 0 && (_err$response2$data = _err$response2.data) !== null && _err$response2$data !== void 0 && (_err$response2$data$e = _err$response2$data.error) !== null && _err$response2$data$e !== void 0 && _err$response2$data$e.includes(\"Token\")) {\n        console.warn(\"[fetchUserData] Auth error, logging out.\");\n        contextLogout();\n        navigate(\"/bejelentkezes\");\n      }\n    } finally {\n      setLoading(false);\n    }\n    // Dependencies: only things outside the function that it DIRECTLY uses AND might change in a way that requires re-fetching\n    // isLoggedIn change should trigger re-fetch. contextLogin/Logout/navigate are stable.\n  }, [isLoggedIn, contextLogin, contextLogout, navigate]);\n\n  // --- Effect for Initial Load / Login Status Change ---\n  useEffect(() => {\n    if (isLoggedIn) {\n      // If logged in but no user data locally yet, fetch it\n      if (!user) {\n        fetchUserData();\n      } else {\n        // If we already have user data (from context or previous fetch)\n        // and we are NOT in editing mode, ensure the form is synced.\n        if (!editing) {\n          initializeForm(user);\n        }\n        // If we came here from context, ensure loading is false\n        if (loading) setLoading(false);\n      }\n    } else {\n      // If not logged in, navigate to login page\n      if (!loading) {\n        // Avoid navigation loop if already navigating\n        navigate(\"/bejelentkezes\");\n      }\n    }\n    // IMPORTANT: This useEffect should primarily depend on isLoggedIn and whether 'user' is null.\n    // Adding 'fetchUserData' and 'initializeForm' here can still cause loops if their references change unnecessarily.\n    // Let's rely on isLoggedIn and the presence of 'user' state.\n  }, [isLoggedIn, user, editing, initializeForm, fetchUserData, navigate, loading]); // Added loading here\n\n  // --- Validation (Memoized) ---\n  const validateForm = useCallback(() => {\n    // ... (validation logic remains the same) ...\n    const errors = {};\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\n    if (!newEmail.trim()) {\n      errors.email = \"Email cím megadása kötelező!\";\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\n      errors.email = \"Érvénytelen email cím formátum!\";\n    }\n    if (newPassword && newPassword.length < 6) {\n      errors.password = \"Jelszó min. 6 karakter!\";\n    }\n    const trimmedImageUrl = imageUrl.trim();\n    if (trimmedImageUrl && !trimmedImageUrl.startsWith(\"http://\") && !trimmedImageUrl.startsWith(\"https://\")) {\n      errors.imageUrl = \"Érvénytelen URL (http:// vagy https://)!\";\n    }\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\n\n  // --- Handle Update ---\n  const handleEditSubmit = async e => {\n    // Renamed to avoid confusion\n    e.preventDefault();\n    if (!validateForm()) return;\n    setUpdateLoading(true);\n    setUpdateError(\"\");\n    setUpdateSuccess(\"\");\n    setValidationErrors({});\n    const dataToUpdate = {\n      name: newName.trim(),\n      email: newEmail.trim(),\n      phone: phoneNumber.trim() || null,\n      profile_picture_url: imageUrl.trim() || null\n    };\n    if (newPassword.trim()) {\n      dataToUpdate.password = newPassword.trim();\n    }\n    try {\n      console.log(\"[handleEditSubmit] Calling updateUser with:\", dataToUpdate);\n      const response = await updateUser(dataToUpdate);\n      if (response && response.success && response.user) {\n        console.log(\"[handleEditSubmit] Update successful. Received user:\", response.user);\n        // Update states with data returned from backend\n        setUser(response.user);\n        contextLogin(response.user, localStorage.getItem(\"token\"));\n        initializeForm(response.user); // Re-initialize form with the updated data\n        setEditing(false); // Exit edit mode\n        setUpdateSuccess(\"Adatok sikeresen frissítve!\");\n        setTimeout(() => setUpdateSuccess(\"\"), 4000);\n      } else {\n        throw new Error((response === null || response === void 0 ? void 0 : response.error) || \"Ismeretlen hiba a frissítés után.\");\n      }\n    } catch (err) {\n      console.error(\"[handleEditSubmit] Error:\", err);\n      setUpdateError(err.message || \"Hiba történt a mentés során.\");\n    } finally {\n      setUpdateLoading(false);\n    }\n  };\n\n  // --- Logout ---\n  const handleLogout = () => {\n    if (window.confirm(\"Biztosan ki szeretne lépni?\")) {\n      contextLogout();\n      navigate(\"/\");\n    }\n  };\n\n  // --- Cancel Edit ---\n  const handleCancelEdit = () => {\n    setEditing(false);\n    // Reset form fields from the current 'user' state\n    if (user) {\n      initializeForm(user);\n    }\n    // Clear any update/validation errors\n    setUpdateError(\"\");\n    setValidationErrors({});\n    setUpdateSuccess(\"\");\n  };\n\n  // --- Image Error Handler (Memoized) ---\n  const handleImageError = useCallback(e => {\n    console.warn(\"Image onError triggered. Fallback to placeholder.\");\n    if (placeholderImage && e.target.src !== placeholderImage) {\n      // Prevent infinite loop if placeholder fails\n      e.target.src = placeholderImage;\n    } else {\n      console.error(\"Placeholder image failed or is the same as src.\");\n      e.target.style.display = \"none\"; // Hide broken image element\n    }\n  }, []); // Placeholder image is stable\n\n  // --- Render Logic ---\n  if (loading) {\n    // Simplified loading check\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container text-center p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Profil bet\\xF6lt\\xE9se...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If not logged in or user data failed to load after trying\n  if (!isLoggedIn || !user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger\",\n        children: error || \"A profil megtekintéséhez be kell jelentkezni.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(\"/bejelentkezes\"),\n        children: \"Bejelentkez\\xE9s\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- Main Profile Render ---\n  // Determine image source AFTER user state is confirmed to be non-null\n  const displayImageUrl = user.profile_picture_url || placeholderImage;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card card shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"profile-title card-title text-center mb-4\",\n          children: \"Profil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), updateSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-success alert-dismissible fade show small\",\n          role: \"alert\",\n          children: [updateSuccess, /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close btn-sm\",\n            onClick: () => setUpdateSuccess(\"\"),\n            \"aria-label\": \"Bez\\xE1r\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), updateError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger alert-dismissible fade show small\",\n          role: \"alert\",\n          children: [updateError, /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close btn-sm\",\n            onClick: () => setUpdateError(\"\"),\n            \"aria-label\": \"Bez\\xE1r\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), error && !editing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-warning text-center small\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-image-section text-center mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: displayImageUrl // Use derived variable\n              ,\n              alt: `${user.name || \"Felhasználó\"} profilképe`,\n              className: \"profile-image rounded-circle border\",\n              // Key helps React update the img if src changes\n              onError: handleImageError // Error handler attached\n              ,\n              style: {\n                width: \"150px\",\n                height: \"150px\",\n                objectFit: \"cover\"\n              }\n            }, displayImageUrl, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"profile-subtitle h5 text-center text-muted mb-3\",\n            children: \"Felhaszn\\xE1l\\xF3i adatok\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), !editing ?\n          /*#__PURE__*/\n          // --- Display Mode ---\n          _jsxDEV(\"div\", {\n            className: \"profile-details text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"N\\xE9v:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this), \" \", user.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this), \" \", user.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Telefonsz\\xE1m:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 19\n              }, this), \" \", user.phone || \"Nincs megadva\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted\",\n                children: [\"Regisztr\\xE1ci\\xF3:\", \" \", user.created_at ? new Date(user.created_at).toLocaleDateString(\"hu-HU\") : \"Ismeretlen\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-actions mt-4 d-flex justify-content-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-primary btn-sm\",\n                onClick: () => setEditing(true),\n                disabled: updateLoading,\n                children: \"Adatok szerkeszt\\xE9se\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-danger btn-sm\",\n                onClick: handleLogout,\n                disabled: updateLoading,\n                children: \"Kil\\xE9p\\xE9s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this) :\n          /*#__PURE__*/\n          // --- Editing Mode ---\n          _jsxDEV(\"form\", {\n            id: \"profileForm\",\n            onSubmit: handleEditSubmit,\n            noValidate: true,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"editName\",\n                className: \"form-label form-label-sm\",\n                children: \"N\\xE9v\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: `form-control form-control-sm ${validationErrors.name ? \"is-invalid\" : \"\"}`,\n                id: \"editName\",\n                value: newName,\n                onChange: e => setNewName(e.target.value),\n                required: true,\n                disabled: updateLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this), validationErrors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback small\",\n                children: validationErrors.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"editEmail\",\n                className: \"form-label form-label-sm\",\n                children: \"Email c\\xEDm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: `form-control form-control-sm ${validationErrors.email ? \"is-invalid\" : \"\"}`,\n                id: \"editEmail\",\n                value: newEmail,\n                onChange: e => setNewEmail(e.target.value),\n                required: true,\n                disabled: updateLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 19\n              }, this), validationErrors.email && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback small\",\n                children: validationErrors.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"editPhoneNumber\",\n                className: \"form-label form-label-sm\",\n                children: \"Telefonsz\\xE1m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                className: `form-control form-control-sm ${validationErrors.phoneNumber ? \"is-invalid\" : \"\"}`,\n                id: \"editPhoneNumber\",\n                value: phoneNumber,\n                onChange: e => setPhoneNumber(e.target.value),\n                placeholder: \"Opcion\\xE1lis\",\n                disabled: updateLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), validationErrors.phoneNumber && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback small\",\n                children: validationErrors.phoneNumber\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"profileImageUrl\",\n                className: \"form-label form-label-sm\",\n                children: \"Profilk\\xE9p URL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: `form-control form-control-sm ${validationErrors.imageUrl ? \"is-invalid\" : \"\"}`,\n                id: \"profileImageUrl\",\n                value: imageUrl // Input field value state\n                ,\n                onChange: e => setImageUrl(e.target.value),\n                placeholder: \"https://kep.url/profil.jpg (Opcion\\xE1lis)\",\n                \"aria-describedby\": \"imageUrlHelp imageUrlError\",\n                disabled: updateLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 19\n              }, this), validationErrors.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"imageUrlError\",\n                className: \"invalid-feedback small\",\n                children: validationErrors.imageUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"imageUrlHelp\",\n                className: \"form-text small text-muted\",\n                children: \"Add meg a k\\xE9p teljes URL-j\\xE9t. Hagyd \\xFCresen a t\\xF6rl\\xE9shez.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"editPassword\",\n                className: \"form-label form-label-sm\",\n                children: \"\\xDAj jelsz\\xF3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: `form-control form-control-sm ${validationErrors.password ? \"is-invalid\" : \"\"}`,\n                id: \"editPassword\",\n                value: newPassword,\n                onChange: e => setNewPassword(e.target.value),\n                placeholder: \"Minimum 6 karakter\",\n                \"aria-describedby\": \"passwordHelp\",\n                disabled: updateLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), validationErrors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback small\",\n                children: validationErrors.password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"passwordHelp\",\n                className: \"form-text small text-muted\",\n                children: \"Hagyd \\xFCresen, ha nem akarod megv\\xE1ltoztatni.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-actions mt-4 d-flex justify-content-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary btn-sm\",\n                disabled: updateLoading,\n                children: updateLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm me-1\",\n                    role: \"status\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 25\n                  }, this), \"Ment\\xE9s...\"]\n                }, void 0, true) : \"Módosítások Mentése\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-outline-secondary btn-sm\",\n                onClick: handleCancelEdit,\n                disabled: updateLoading,\n                children: \"M\\xE9gse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"5enQYY7MdGsmJDi1fDwGanuzFDA=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","useNavigate","getUser","updateUser","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","placeholderImage","Profile","_s","isLoggedIn","user","contextUser","login","contextLogin","logout","contextLogout","navigate","setUser","loading","setLoading","updateLoading","setUpdateLoading","editing","setEditing","error","setError","updateError","setUpdateError","validationErrors","setValidationErrors","updateSuccess","setUpdateSuccess","newName","setNewName","newEmail","setNewEmail","newPassword","setNewPassword","phoneNumber","setPhoneNumber","imageUrl","setImageUrl","initializeForm","userData","console","warn","log","name","email","phone","currentImageUrl","profile_picture_url","fetchUserData","fetchedData","Error","localStorage","getItem","err","_err$message","_err$response","_err$response2","_err$response2$data","_err$response2$data$e","message","includes","response","status","data","validateForm","errors","trim","test","length","password","trimmedImageUrl","startsWith","Object","keys","handleEditSubmit","e","preventDefault","dataToUpdate","success","setTimeout","handleLogout","window","confirm","handleCancelEdit","handleImageError","target","src","style","display","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","displayImageUrl","type","alt","onError","width","height","objectFit","created_at","Date","toLocaleDateString","disabled","id","onSubmit","noValidate","htmlFor","value","onChange","required","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/KomPhone/Desktop/Parfumvilag2.0/Parfumvilag_2.0/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getUser, updateUser } from \"../services/userService\";\r\nimport { AuthContext } from \"../App\";\r\n//import placeholderImage from \"../assets/placeholder.png\";\r\nconst placeholderImage = \"https://via.placeholder.com/150\";\r\n\r\nconst Profile = () => {\r\n  // --- Context and Navigation ---\r\n  const {\r\n    isLoggedIn,\r\n    user: contextUser,\r\n    login: contextLogin,\r\n    logout: contextLogout,\r\n  } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  // --- State Definitions ---\r\n  const [user, setUser] = useState(contextUser || null); // Use context user as initial state\r\n  const [loading, setLoading] = useState(!contextUser); // Only load initially if no context user\r\n  const [updateLoading, setUpdateLoading] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [updateError, setUpdateError] = useState(\"\");\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n  const [updateSuccess, setUpdateSuccess] = useState(\"\");\r\n\r\n  // --- Form State ---\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(\"\"); // Input field value\r\n  // ProfileImage state is removed, we'll derive src directly from `user` state or placeholder\r\n\r\n  // --- Initialize Form (Memoized) ---\r\n  // This function now ONLY sets form fields based on passed data\r\n  const initializeForm = useCallback((userData) => {\r\n    if (!userData) {\r\n      console.warn(\"[initializeForm] No user data provided.\");\r\n      // Optionally reset form fields to empty if no user data\r\n      setNewName(\"\");\r\n      setNewEmail(\"\");\r\n      setPhoneNumber(\"\");\r\n      setImageUrl(\"\");\r\n      setNewPassword(\"\");\r\n      return;\r\n    }\r\n    console.log(\r\n      \"[initializeForm] Initializing form state from userData:\",\r\n      userData\r\n    );\r\n    setNewName(userData.name || \"\");\r\n    setNewEmail(userData.email || \"\");\r\n    setPhoneNumber(userData.phone || \"\");\r\n    const currentImageUrl = userData.profile_picture_url || \"\";\r\n    setImageUrl(currentImageUrl); // Set input value\r\n    // No need for separate profileImage state anymore\r\n    setNewPassword(\"\"); // Always clear password field\r\n    setValidationErrors({});\r\n    setUpdateError(\"\");\r\n    setUpdateSuccess(\"\");\r\n  }, []); // No external dependencies needed for the function logic itself\r\n\r\n  // --- Fetch User Data (Memoized) ---\r\n  // This function fetches data and updates user state and context\r\n  const fetchUserData = useCallback(async () => {\r\n    console.log(\"[fetchUserData] Attempting to fetch...\");\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const fetchedData = await getUser();\r\n      if (!fetchedData) throw new Error(\"Nem érkeztek felhasználói adatok.\");\r\n      console.log(\"[fetchUserData] Success:\", fetchedData);\r\n\r\n      // Update local state and context\r\n      setUser(fetchedData);\r\n      contextLogin(fetchedData, localStorage.getItem(\"token\"));\r\n      // Initialize form fields AFTER setting user state\r\n      // initializeForm(fetchedData); // Moved initialization to useEffect\r\n    } catch (err) {\r\n      console.error(\"[fetchUserData] Error:\", err);\r\n      setError(err.message || \"Profil betöltési hiba.\");\r\n      if (\r\n        err.message?.includes(\"hitelesít\") ||\r\n        err.response?.status === 401 ||\r\n        err.response?.data?.error?.includes(\"Token\")\r\n      ) {\r\n        console.warn(\"[fetchUserData] Auth error, logging out.\");\r\n        contextLogout();\r\n        navigate(\"/bejelentkezes\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    // Dependencies: only things outside the function that it DIRECTLY uses AND might change in a way that requires re-fetching\r\n    // isLoggedIn change should trigger re-fetch. contextLogin/Logout/navigate are stable.\r\n  }, [isLoggedIn, contextLogin, contextLogout, navigate]);\r\n\r\n  // --- Effect for Initial Load / Login Status Change ---\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      // If logged in but no user data locally yet, fetch it\r\n      if (!user) {\r\n        fetchUserData();\r\n      } else {\r\n        // If we already have user data (from context or previous fetch)\r\n        // and we are NOT in editing mode, ensure the form is synced.\r\n        if (!editing) {\r\n          initializeForm(user);\r\n        }\r\n        // If we came here from context, ensure loading is false\r\n        if (loading) setLoading(false);\r\n      }\r\n    } else {\r\n      // If not logged in, navigate to login page\r\n      if (!loading) {\r\n        // Avoid navigation loop if already navigating\r\n        navigate(\"/bejelentkezes\");\r\n      }\r\n    }\r\n    // IMPORTANT: This useEffect should primarily depend on isLoggedIn and whether 'user' is null.\r\n    // Adding 'fetchUserData' and 'initializeForm' here can still cause loops if their references change unnecessarily.\r\n    // Let's rely on isLoggedIn and the presence of 'user' state.\r\n  }, [\r\n    isLoggedIn,\r\n    user,\r\n    editing,\r\n    initializeForm,\r\n    fetchUserData,\r\n    navigate,\r\n    loading,\r\n  ]); // Added loading here\r\n\r\n  // --- Validation (Memoized) ---\r\n  const validateForm = useCallback(() => {\r\n    // ... (validation logic remains the same) ...\r\n    const errors = {};\r\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\r\n    if (!newEmail.trim()) {\r\n      errors.email = \"Email cím megadása kötelező!\";\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\r\n      errors.email = \"Érvénytelen email cím formátum!\";\r\n    }\r\n    if (newPassword && newPassword.length < 6) {\r\n      errors.password = \"Jelszó min. 6 karakter!\";\r\n    }\r\n    const trimmedImageUrl = imageUrl.trim();\r\n    if (\r\n      trimmedImageUrl &&\r\n      !trimmedImageUrl.startsWith(\"http://\") &&\r\n      !trimmedImageUrl.startsWith(\"https://\")\r\n    ) {\r\n      errors.imageUrl = \"Érvénytelen URL (http:// vagy https://)!\";\r\n    }\r\n    setValidationErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\r\n\r\n  // --- Handle Update ---\r\n  const handleEditSubmit = async (e) => {\r\n    // Renamed to avoid confusion\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    setUpdateLoading(true);\r\n    setUpdateError(\"\");\r\n    setUpdateSuccess(\"\");\r\n    setValidationErrors({});\r\n\r\n    const dataToUpdate = {\r\n      name: newName.trim(),\r\n      email: newEmail.trim(),\r\n      phone: phoneNumber.trim() || null,\r\n      profile_picture_url: imageUrl.trim() || null,\r\n    };\r\n    if (newPassword.trim()) {\r\n      dataToUpdate.password = newPassword.trim();\r\n    }\r\n\r\n    try {\r\n      console.log(\"[handleEditSubmit] Calling updateUser with:\", dataToUpdate);\r\n      const response = await updateUser(dataToUpdate);\r\n\r\n      if (response && response.success && response.user) {\r\n        console.log(\r\n          \"[handleEditSubmit] Update successful. Received user:\",\r\n          response.user\r\n        );\r\n        // Update states with data returned from backend\r\n        setUser(response.user);\r\n        contextLogin(response.user, localStorage.getItem(\"token\"));\r\n        initializeForm(response.user); // Re-initialize form with the updated data\r\n        setEditing(false); // Exit edit mode\r\n        setUpdateSuccess(\"Adatok sikeresen frissítve!\");\r\n        setTimeout(() => setUpdateSuccess(\"\"), 4000);\r\n      } else {\r\n        throw new Error(response?.error || \"Ismeretlen hiba a frissítés után.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[handleEditSubmit] Error:\", err);\r\n      setUpdateError(err.message || \"Hiba történt a mentés során.\");\r\n    } finally {\r\n      setUpdateLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Logout ---\r\n  const handleLogout = () => {\r\n    if (window.confirm(\"Biztosan ki szeretne lépni?\")) {\r\n      contextLogout();\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  // --- Cancel Edit ---\r\n  const handleCancelEdit = () => {\r\n    setEditing(false);\r\n    // Reset form fields from the current 'user' state\r\n    if (user) {\r\n      initializeForm(user);\r\n    }\r\n    // Clear any update/validation errors\r\n    setUpdateError(\"\");\r\n    setValidationErrors({});\r\n    setUpdateSuccess(\"\");\r\n  };\r\n\r\n  // --- Image Error Handler (Memoized) ---\r\n  const handleImageError = useCallback((e) => {\r\n    console.warn(\"Image onError triggered. Fallback to placeholder.\");\r\n    if (placeholderImage && e.target.src !== placeholderImage) {\r\n      // Prevent infinite loop if placeholder fails\r\n      e.target.src = placeholderImage;\r\n    } else {\r\n      console.error(\"Placeholder image failed or is the same as src.\");\r\n      e.target.style.display = \"none\"; // Hide broken image element\r\n    }\r\n  }, []); // Placeholder image is stable\r\n\r\n  // --- Render Logic ---\r\n  if (loading) {\r\n    // Simplified loading check\r\n    return (\r\n      <div className=\"container text-center p-5\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Profil betöltése...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If not logged in or user data failed to load after trying\r\n  if (!isLoggedIn || !user) {\r\n    return (\r\n      <div className=\"container py-5 text-center\">\r\n        <p className=\"text-danger\">\r\n          {error || \"A profil megtekintéséhez be kell jelentkezni.\"}\r\n        </p>\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => navigate(\"/bejelentkezes\")}\r\n        >\r\n          Bejelentkezés\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Main Profile Render ---\r\n  // Determine image source AFTER user state is confirmed to be non-null\r\n  const displayImageUrl = user.profile_picture_url || placeholderImage;\r\n\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <div className=\"profile-card card shadow-sm\">\r\n        <div className=\"card-body\">\r\n          <h1 className=\"profile-title card-title text-center mb-4\">Profil</h1>\r\n\r\n          {/* Messages */}\r\n          {updateSuccess && (\r\n            <div\r\n              className=\"alert alert-success alert-dismissible fade show small\"\r\n              role=\"alert\"\r\n            >\r\n              {updateSuccess}\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close btn-sm\"\r\n                onClick={() => setUpdateSuccess(\"\")}\r\n                aria-label=\"Bezár\"\r\n              ></button>\r\n            </div>\r\n          )}\r\n          {updateError && (\r\n            <div\r\n              className=\"alert alert-danger alert-dismissible fade show small\"\r\n              role=\"alert\"\r\n            >\r\n              {updateError}\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close btn-sm\"\r\n                onClick={() => setUpdateError(\"\")}\r\n                aria-label=\"Bezár\"\r\n              ></button>\r\n            </div>\r\n          )}\r\n          {/* General fetch error only shown in display mode */}\r\n          {error && !editing && (\r\n            <div className=\"alert alert-warning text-center small\">{error}</div>\r\n          )}\r\n\r\n          <div className=\"profile-content\">\r\n            {/* Image Section */}\r\n            <div className=\"profile-image-section text-center mb-4\">\r\n              <img\r\n                src={displayImageUrl} // Use derived variable\r\n                alt={`${user.name || \"Felhasználó\"} profilképe`}\r\n                className=\"profile-image rounded-circle border\"\r\n                key={displayImageUrl} // Key helps React update the img if src changes\r\n                onError={handleImageError} // Error handler attached\r\n                style={{ width: \"150px\", height: \"150px\", objectFit: \"cover\" }}\r\n              />\r\n            </div>\r\n\r\n            {/* Details / Form Section */}\r\n            <h3 className=\"profile-subtitle h5 text-center text-muted mb-3\">\r\n              Felhasználói adatok\r\n            </h3>\r\n            {!editing ? (\r\n              // --- Display Mode ---\r\n              <div className=\"profile-details text-center\">\r\n                <p>\r\n                  <strong>Név:</strong> {user.name}\r\n                </p>\r\n                <p>\r\n                  <strong>Email:</strong> {user.email}\r\n                </p>\r\n                <p>\r\n                  <strong>Telefonszám:</strong> {user.phone || \"Nincs megadva\"}\r\n                </p>\r\n                <p>\r\n                  <small className=\"text-muted\">\r\n                    Regisztráció:{\" \"}\r\n                    {user.created_at\r\n                      ? new Date(user.created_at).toLocaleDateString(\"hu-HU\")\r\n                      : \"Ismeretlen\"}\r\n                  </small>\r\n                </p>\r\n                <div className=\"profile-actions mt-4 d-flex justify-content-center gap-2\">\r\n                  <button\r\n                    className=\"btn btn-outline-primary btn-sm\"\r\n                    onClick={() => setEditing(true)}\r\n                    disabled={updateLoading}\r\n                  >\r\n                    Adatok szerkesztése\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-outline-danger btn-sm\"\r\n                    onClick={handleLogout}\r\n                    disabled={updateLoading}\r\n                  >\r\n                    Kilépés\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              // --- Editing Mode ---\r\n              <form id=\"profileForm\" onSubmit={handleEditSubmit} noValidate>\r\n                {/* Name */}\r\n                <div className=\"mb-3\">\r\n                  <label\r\n                    htmlFor=\"editName\"\r\n                    className=\"form-label form-label-sm\"\r\n                  >\r\n                    Név\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={`form-control form-control-sm ${\r\n                      validationErrors.name ? \"is-invalid\" : \"\"\r\n                    }`}\r\n                    id=\"editName\"\r\n                    value={newName}\r\n                    onChange={(e) => setNewName(e.target.value)}\r\n                    required\r\n                    disabled={updateLoading}\r\n                  />\r\n                  {validationErrors.name && (\r\n                    <div className=\"invalid-feedback small\">\r\n                      {validationErrors.name}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {/* Email */}\r\n                <div className=\"mb-3\">\r\n                  <label\r\n                    htmlFor=\"editEmail\"\r\n                    className=\"form-label form-label-sm\"\r\n                  >\r\n                    Email cím\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    className={`form-control form-control-sm ${\r\n                      validationErrors.email ? \"is-invalid\" : \"\"\r\n                    }`}\r\n                    id=\"editEmail\"\r\n                    value={newEmail}\r\n                    onChange={(e) => setNewEmail(e.target.value)}\r\n                    required\r\n                    disabled={updateLoading}\r\n                  />\r\n                  {validationErrors.email && (\r\n                    <div className=\"invalid-feedback small\">\r\n                      {validationErrors.email}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {/* Phone */}\r\n                <div className=\"mb-3\">\r\n                  <label\r\n                    htmlFor=\"editPhoneNumber\"\r\n                    className=\"form-label form-label-sm\"\r\n                  >\r\n                    Telefonszám\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    className={`form-control form-control-sm ${\r\n                      validationErrors.phoneNumber ? \"is-invalid\" : \"\"\r\n                    }`}\r\n                    id=\"editPhoneNumber\"\r\n                    value={phoneNumber}\r\n                    onChange={(e) => setPhoneNumber(e.target.value)}\r\n                    placeholder=\"Opcionális\"\r\n                    disabled={updateLoading}\r\n                  />\r\n                  {validationErrors.phoneNumber && (\r\n                    <div className=\"invalid-feedback small\">\r\n                      {validationErrors.phoneNumber}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {/* Profile Image URL */}\r\n                <div className=\"mb-3\">\r\n                  <label\r\n                    htmlFor=\"profileImageUrl\"\r\n                    className=\"form-label form-label-sm\"\r\n                  >\r\n                    Profilkép URL\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={`form-control form-control-sm ${\r\n                      validationErrors.imageUrl ? \"is-invalid\" : \"\"\r\n                    }`}\r\n                    id=\"profileImageUrl\"\r\n                    value={imageUrl} // Input field value state\r\n                    onChange={(e) => setImageUrl(e.target.value)}\r\n                    placeholder=\"https://kep.url/profil.jpg (Opcionális)\"\r\n                    aria-describedby=\"imageUrlHelp imageUrlError\"\r\n                    disabled={updateLoading}\r\n                  />\r\n                  {validationErrors.imageUrl && (\r\n                    <div id=\"imageUrlError\" className=\"invalid-feedback small\">\r\n                      {validationErrors.imageUrl}\r\n                    </div>\r\n                  )}\r\n                  <div id=\"imageUrlHelp\" className=\"form-text small text-muted\">\r\n                    Add meg a kép teljes URL-jét. Hagyd üresen a törléshez.\r\n                  </div>\r\n                </div>\r\n                {/* Password */}\r\n                <div className=\"mb-3\">\r\n                  <label\r\n                    htmlFor=\"editPassword\"\r\n                    className=\"form-label form-label-sm\"\r\n                  >\r\n                    Új jelszó\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className={`form-control form-control-sm ${\r\n                      validationErrors.password ? \"is-invalid\" : \"\"\r\n                    }`}\r\n                    id=\"editPassword\"\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                    placeholder=\"Minimum 6 karakter\"\r\n                    aria-describedby=\"passwordHelp\"\r\n                    disabled={updateLoading}\r\n                  />\r\n                  {validationErrors.password && (\r\n                    <div className=\"invalid-feedback small\">\r\n                      {validationErrors.password}\r\n                    </div>\r\n                  )}\r\n                  <div id=\"passwordHelp\" className=\"form-text small text-muted\">\r\n                    Hagyd üresen, ha nem akarod megváltoztatni.\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Buttons */}\r\n                <div className=\"profile-actions mt-4 d-flex justify-content-center gap-2\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary btn-sm\"\r\n                    disabled={updateLoading}\r\n                  >\r\n                    {updateLoading ? (\r\n                      <>\r\n                        <span\r\n                          className=\"spinner-border spinner-border-sm me-1\"\r\n                          role=\"status\"\r\n                          aria-hidden=\"true\"\r\n                        ></span>\r\n                        Mentés...\r\n                      </>\r\n                    ) : (\r\n                      \"Módosítások Mentése\"\r\n                    )}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-secondary btn-sm\"\r\n                    onClick={handleCancelEdit}\r\n                    disabled={updateLoading}\r\n                  >\r\n                    Mégse\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}