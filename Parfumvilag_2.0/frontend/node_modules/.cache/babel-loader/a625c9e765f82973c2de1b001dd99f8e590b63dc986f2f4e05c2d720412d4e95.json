{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[profileName,setProfileName]=useState(\"\");const[profileEmail,setProfileEmail]=useState(\"\");const[profileDate,setProfileDate]=useState(\"\");const[editing,setEditing]=useState(false);const[newName,setNewName]=useState(\"\");const[newEmail,setNewEmail]=useState(\"\");const[newPassword,setNewPassword]=useState(\"\");useEffect(()=>{const fetchProfile=async()=>{try{const response=await axios.get(\"/api/users/me\",{headers:{\"x-auth-token\":localStorage.getItem(\"token\")}});const user=response.data;setProfileName(user.name);setProfileEmail(user.email);setProfileDate(user.created_at.split(\"T\")[0]);setNewName(user.name);setNewEmail(user.email);}catch(error){console.error(\"Error fetching profile:\",error);alert(\"Profil betöltése sikertelen.\");}};if(localStorage.getItem(\"isLoggedIn\")===\"true\"){fetchProfile();}},[]);const handleEdit=()=>{setEditing(true);};const handleCancel=()=>{setEditing(false);};const handleSave=async()=>{try{const response=await axios.put(\"/api/users/me\",{name:newName,email:newEmail,password:newPassword},{headers:{\"x-auth-token\":localStorage.getItem(\"token\")}});const updatedUser=response.data;setProfileName(updatedUser.name);setProfileEmail(updatedUser.email);setEditing(false);alert(\"Adatok frissítve!\");}catch(error){setError(error.response.data.error||\"Adatok frissítése sikertelen.\");}};const handleLogout=()=>{localStorage.removeItem(\"isLoggedIn\");localStorage.removeItem(\"username\");localStorage.removeItem(\"email\");localStorage.removeItem(\"registrationDate\");localStorage.removeItem(\"token\");alert(\"Sikeresen kijelentkeztél!\");window.location.href=\"/\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profil\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Felhaszn\\xE1l\\xF3i adatok\"}),editing?/*#__PURE__*/_jsxs(\"form\",{id:\"profileForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editName\",className:\"form-label\",children:\"N\\xE9v\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"editName\",value:newName,onChange:e=>setNewName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editEmail\",className:\"form-label\",children:\"Email c\\xEDm\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"editEmail\",value:newEmail,onChange:e=>setNewEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editPassword\",className:\"form-label\",children:\"\\xDAj jelsz\\xF3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"editPassword\",value:newPassword,onChange:e=>setNewPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,children:\"Ment\\xE9s\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary ms-2\",onClick:handleCancel,children:\"M\\xE9gse\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"N\\xE9v:\"}),\" \",profileName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profileEmail]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Regisztr\\xE1ci\\xF3 d\\xE1tuma:\"}),\" \",profileDate]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary\",onClick:handleEdit,children:\"Adatok szerkeszt\\xE9se\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary ms-2\",onClick:handleLogout,children:\"Kijelentkez\\xE9s\"})]})]})})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Profile","profileName","setProfileName","profileEmail","setProfileEmail","profileDate","setProfileDate","editing","setEditing","newName","setNewName","newEmail","setNewEmail","newPassword","setNewPassword","fetchProfile","response","get","headers","localStorage","getItem","user","data","name","email","created_at","split","error","console","alert","handleEdit","handleCancel","handleSave","put","password","updatedUser","setError","handleLogout","removeItem","window","location","href","className","children","id","htmlFor","type","value","onChange","e","target","onClick"],"sources":["C:/Users/KomPhone/Desktop/Sulis(Bencés)/kerteszmarton/Mestermunka/Test5/Parfumvilag_2.0/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Profile = () => {\r\n  const [profileName, setProfileName] = useState(\"\");\r\n  const [profileEmail, setProfileEmail] = useState(\"\");\r\n  const [profileDate, setProfileDate] = useState(\"\");\r\n  const [editing, setEditing] = useState(false);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const response = await axios.get(\"/api/users/me\", {\r\n          headers: {\r\n            \"x-auth-token\": localStorage.getItem(\"token\"),\r\n          },\r\n        });\r\n        const user = response.data;\r\n        setProfileName(user.name);\r\n        setProfileEmail(user.email);\r\n        setProfileDate(user.created_at.split(\"T\")[0]);\r\n        setNewName(user.name);\r\n        setNewEmail(user.email);\r\n      } catch (error) {\r\n        console.error(\"Error fetching profile:\", error);\r\n        alert(\"Profil betöltése sikertelen.\");\r\n      }\r\n    };\r\n\r\n    if (localStorage.getItem(\"isLoggedIn\") === \"true\") {\r\n      fetchProfile();\r\n    }\r\n  }, []);\r\n\r\n  const handleEdit = () => {\r\n    setEditing(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditing(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const response = await axios.put(\r\n        \"/api/users/me\",\r\n        { name: newName, email: newEmail, password: newPassword },\r\n        {\r\n          headers: {\r\n            \"x-auth-token\": localStorage.getItem(\"token\"),\r\n          },\r\n        }\r\n      );\r\n      const updatedUser = response.data;\r\n      setProfileName(updatedUser.name);\r\n      setProfileEmail(updatedUser.email);\r\n      setEditing(false);\r\n      alert(\"Adatok frissítve!\");\r\n    } catch (error) {\r\n      setError(error.response.data.error || \"Adatok frissítése sikertelen.\");\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    localStorage.removeItem(\"username\");\r\n    localStorage.removeItem(\"email\");\r\n    localStorage.removeItem(\"registrationDate\");\r\n    localStorage.removeItem(\"token\");\r\n    alert(\"Sikeresen kijelentkeztél!\");\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Profil</h1>\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n          <h3>Felhasználói adatok</h3>\r\n          {editing ? (\r\n            <form id=\"profileForm\">\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editName\" className=\"form-label\">\r\n                  Név\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"editName\"\r\n                  value={newName}\r\n                  onChange={(e) => setNewName(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editEmail\" className=\"form-label\">\r\n                  Email cím\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"editEmail\"\r\n                  value={newEmail}\r\n                  onChange={(e) => setNewEmail(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editPassword\" className=\"form-label\">\r\n                  Új jelszó\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  id=\"editPassword\"\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                />\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={handleSave}\r\n              >\r\n                Mentés\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary ms-2\"\r\n                onClick={handleCancel}\r\n              >\r\n                Mégse\r\n              </button>\r\n            </form>\r\n          ) : (\r\n            <div>\r\n              <p>\r\n                <strong>Név:</strong> {profileName}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong> {profileEmail}\r\n              </p>\r\n              <p>\r\n                <strong>Regisztráció dátuma:</strong> {profileDate}\r\n              </p>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-primary\"\r\n                onClick={handleEdit}\r\n              >\r\n                Adatok szerkesztése\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary ms-2\"\r\n                onClick={handleLogout}\r\n              >\r\n                Kijelentkezés\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}