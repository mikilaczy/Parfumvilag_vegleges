{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KomPhone\\\\Desktop\\\\Parfumvilag2.0\\\\Parfumvilag_2.0\\\\frontend\\\\src\\\\pages\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from \"react\"; // Import useContext\nimport { useNavigate } from \"react-router-dom\";\nimport { getUser, updateUser } from \"../services/userService\";\nimport { AuthContext } from \"../App\"; // Import AuthContext\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    isLoggedIn,\n    user: contextUser,\n    login: contextLogin,\n    logout: contextLogout\n  } = useContext(AuthContext); // Use context\n  const [user, setUser] = useState(contextUser); // Initialize with context user\n  const [loading, setLoading] = useState(!contextUser); // Only load if not already in context\n  const [editing, setEditing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [validationErrors, setValidationErrors] = useState({});\n  const [updateSuccess, setUpdateSuccess] = useState(\"\"); // For success messages\n\n  // Form state - initialize with user data or empty strings\n  const [newName, setNewName] = useState(\"\");\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\"); // Only for URL input\n  const [profileImage, setProfileImage] = useState(\"\"); // For display\n\n  const navigate = useNavigate();\n\n  // Fetch user data if not available in context or on explicit request\n  const fetchUser = useCallback(async () => {\n    if (!isLoggedIn) {\n      navigate(\"/bejelentkezes\"); // Redirect if not logged in\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    try {\n      const userData = await getUser(); // Fetch from backend\n      if (!userData) {\n        throw new Error(\"Nem sikerült lekérni a felhasználói adatokat.\");\n      }\n      setUser(userData); // Update local state\n      contextLogin(userData, localStorage.getItem(\"token\")); // Update context as well\n\n      // Initialize form state *after* user data is fetched\n      setNewName(userData.name || \"\");\n      setNewEmail(userData.email || \"\");\n      setPhoneNumber(userData.phone || \"\"); // Use DB field name\n      const initialImageUrl = userData.profile_picture_url || \"\"; // Use DB field name\n      setImageUrl(initialImageUrl);\n      setProfileImage(initialImageUrl); // Set display image\n    } catch (err) {\n      var _err$response;\n      console.error(\"Profile fetch error:\", err);\n      setError(err.message || \"Hiba történt a profil betöltése közben.\");\n      setUser(null); // Clear user state on error\n      // Optionally log out if auth error\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 || err.message.includes(\"hitelesít\")) {\n        contextLogout();\n        navigate(\"/bejelentkezes\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [isLoggedIn, navigate, contextLogin, contextLogout]); // Add dependencies\n\n  // Effect to fetch user data on mount if needed\n  useEffect(() => {\n    if (!user) {\n      // Fetch only if user is not already in state (from context)\n      fetchUser();\n    } else {\n      // If user is from context, initialize form state\n      setNewName(user.name || \"\");\n      setNewEmail(user.email || \"\");\n      setPhoneNumber(user.phone || \"\");\n      const initialImageUrl = user.profile_picture_url || \"\";\n      setImageUrl(initialImageUrl);\n      setProfileImage(initialImageUrl);\n      setLoading(false); // No loading needed if data is from context\n    }\n  }, [user, fetchUser]); // Depend on user state and fetchUser function\n\n  // Form Validation\n  const validateForm = useCallback(() => {\n    const errors = {};\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\n    if (!newEmail.trim()) {\n      errors.email = \"Email cím megadása kötelező!\";\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\n      errors.email = \"Érvénytelen email cím formátum!\";\n    }\n    if (newPassword && newPassword.length < 6) {\n      errors.password = \"A jelszónak legalább 6 karakter hosszúnak kell lennie!\";\n    }\n    if (phoneNumber && phoneNumber.trim() && !/^\\+?[0-9\\s-()]{7,}$/.test(phoneNumber)) {\n      // More lenient phone format\n      errors.phoneNumber = \"Érvénytelen telefonszám formátum!\";\n    }\n    if (imageUrl && imageUrl.trim() && !/^https?:\\/\\/.+\\..+/i.test(imageUrl)) {\n      errors.imageUrl = \"Érvénytelen URL formátum! (http:// vagy https:// kell)\";\n    }\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\n\n  // Handle profile update submission\n  const handleEdit = async e => {\n    e.preventDefault(); // Prevent default form submission\n    if (!validateForm()) return;\n    setLoading(true);\n    setError(\"\");\n    setUpdateSuccess(\"\");\n    try {\n      // Prepare data object based on backend expectations\n      const updatedData = {\n        name: newName.trim(),\n        email: newEmail.trim(),\n        phone: phoneNumber.trim() || null,\n        // Send null if empty\n        profile_picture_url: imageUrl.trim() || null // Send null if empty\n      };\n      // Include password only if it's not empty\n      if (newPassword.trim()) {\n        updatedData.password = newPassword.trim();\n      }\n\n      // Call the updateUser service (ensure it sends JSON)\n      const responseData = await updateUser(updatedData);\n\n      // Update context and local state with potentially updated user data from response\n      // Assuming backend returns the updated user object (without password)\n      const refreshedUser = responseData.user || updatedData; // Use response if available\n      setUser(refreshedUser); // Update local state\n      contextLogin(refreshedUser, localStorage.getItem(\"token\")); // Update context\n\n      // Update display image and URL state from response or submitted data\n      setProfileImage(refreshedUser.profile_picture_url || \"\");\n      setImageUrl(refreshedUser.profile_picture_url || \"\");\n      setEditing(false); // Exit editing mode\n      setNewPassword(\"\"); // Clear password field\n      setUpdateSuccess(\"Adatok sikeresen frissítve!\");\n      setTimeout(() => setUpdateSuccess(\"\"), 4000); // Clear success message\n    } catch (err) {\n      console.error(\"Profile update error:\", err);\n      const errorMessage = err.message || \"Hiba történt az adatok mentése közben.\";\n      setError(errorMessage);\n      // Optionally handle specific errors like duplicate email from backend\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Logout Handler\n  const handleLogout = () => {\n    if (window.confirm(\"Biztosan ki szeretne lépni?\")) {\n      contextLogout(); // Use context logout\n      navigate(\"/\"); // Redirect to home\n    }\n  };\n\n  // Retry Fetch Handler\n  const handleRetry = () => {\n    setError(\"\");\n    fetchUser(); // Retry fetching data\n  };\n\n  // --- Conditional Rendering based on state ---\n\n  if (loading && !user) {\n    // Show spinner only if loading initial data\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container text-center p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Profil bet\\xF6lt\\xE9se...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !user) {\n    // Show error prominently if initial fetch failed\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Hiba\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary me-2\",\n          onClick: () => navigate(\"/bejelentkezes\"),\n          children: \"Bejelentkez\\xE9s\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline-secondary\",\n          onClick: handleRetry,\n          children: \"\\xDAjrapr\\xF3b\\xE1l\\xE1s\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    // Should not happen if logic above is correct, but as a fallback\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Felhaszn\\xE1l\\xF3i adatok nem el\\xE9rhet\\u0151k. K\\xE9rj\\xFCk, jelentkezzen be.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(\"/bejelentkezes\"),\n        children: \"Bejelentkez\\xE9s\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- Main Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"profile-title mb-4\",\n        children: \"Profil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), updateSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        children: updateSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), error && editing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-image-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: profileImage || \"https://via.placeholder.com/150?text=Profil\",\n            alt: `${user.name} profilképe`,\n            className: \"profile-image\"\n            // Simple error fallback\n            ,\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"https://via.placeholder.com/150?text=Kép?\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), editing && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"profileImageUrl\",\n              className: \"form-label\",\n              children: \"Profilk\\xE9p URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: `form-control ${validationErrors.imageUrl ? \"is-invalid\" : \"\"}`,\n              id: \"profileImageUrl\",\n              value: imageUrl,\n              onChange: e => {\n                const url = e.target.value;\n                setImageUrl(url);\n                // Update display image preview immediately\n                setProfileImage(url);\n              },\n              placeholder: \"K\\xE9p URL-je (pl. https://...)\",\n              \"aria-describedby\": \"imageUrlError\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), validationErrors.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"imageUrlError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.imageUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"profile-subtitle mb-3\",\n          children: \"Felhaszn\\xE1l\\xF3i adatok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), !editing ?\n        /*#__PURE__*/\n        // --- Display Mode ---\n        _jsxDEV(\"div\", {\n          className: \"profile-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"N\\xE9v:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), \" \", user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this), \" \", user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Telefonsz\\xE1m:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), \" \", user.phone || \"Nincs megadva\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Regisztr\\xE1ci\\xF3:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), \" \", user.created_at ? new Date(user.created_at).toLocaleDateString(\"hu-HU\") : \"Ismeretlen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-actions mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-primary\",\n              onClick: () => setEditing(true),\n              children: \"Adatok szerkeszt\\xE9se\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-danger ms-2\",\n              onClick: handleLogout,\n              children: \"Kil\\xE9p\\xE9s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this) :\n        /*#__PURE__*/\n        // --- Editing Mode ---\n        _jsxDEV(\"form\", {\n          id: \"profileForm\",\n          onSubmit: handleEdit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editName\",\n              className: \"form-label\",\n              children: \"N\\xE9v\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: `form-control ${validationErrors.name ? \"is-invalid\" : \"\"}`,\n              id: \"editName\",\n              value: newName,\n              onChange: e => setNewName(e.target.value),\n              required: true,\n              \"aria-describedby\": \"nameError\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this), validationErrors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"nameError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editEmail\",\n              className: \"form-label\",\n              children: \"Email c\\xEDm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: `form-control ${validationErrors.email ? \"is-invalid\" : \"\"}`,\n              id: \"editEmail\",\n              value: newEmail,\n              onChange: e => setNewEmail(e.target.value),\n              required: true,\n              \"aria-describedby\": \"emailError\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this), validationErrors.email && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"emailError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editPassword\",\n              className: \"form-label\",\n              children: \"\\xDAj jelsz\\xF3 (\\xFCresen hagyva nem v\\xE1ltozik)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: `form-control ${validationErrors.password ? \"is-invalid\" : \"\"}`,\n              id: \"editPassword\",\n              value: newPassword,\n              onChange: e => setNewPassword(e.target.value),\n              \"aria-describedby\": \"passwordError\",\n              placeholder: \"Min. 6 karakter\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), validationErrors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"passwordError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"editPhoneNumber\",\n              className: \"form-label\",\n              children: \"Telefonsz\\xE1m (opcion\\xE1lis)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              className: `form-control ${validationErrors.phoneNumber ? \"is-invalid\" : \"\"}`,\n              id: \"editPhoneNumber\",\n              value: phoneNumber,\n              onChange: e => setPhoneNumber(e.target.value),\n              placeholder: \"Pl. +36 30 123 4567\",\n              \"aria-describedby\": \"phoneNumberError\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this), validationErrors.phoneNumber && /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"phoneNumberError\",\n              className: \"invalid-feedback\",\n              children: validationErrors.phoneNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-actions mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: loading,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-border spinner-border-sm me-2\",\n                  role: \"status\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 23\n                }, this), \"Ment\\xE9s...\"]\n              }, void 0, true) : \"Mentés\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-outline-secondary ms-2\",\n              onClick: () => {\n                setEditing(false);\n                // Reset form fields to original user data\n                setNewName(user.name || \"\");\n                setNewEmail(user.email || \"\");\n                setPhoneNumber(user.phone || \"\");\n                const currentImageUrl = user.profile_picture_url || \"\";\n                setImageUrl(currentImageUrl);\n                setProfileImage(currentImageUrl);\n                setNewPassword(\"\"); // Clear password field\n                setValidationErrors({}); // Clear validation errors\n                setError(\"\"); // Clear general error\n              },\n              disabled: loading,\n              children: \"M\\xE9gse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"gpRB1/mX1nkCN1MVuIEqktMrWTk=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","useNavigate","getUser","updateUser","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","isLoggedIn","user","contextUser","login","contextLogin","logout","contextLogout","setUser","loading","setLoading","editing","setEditing","error","setError","validationErrors","setValidationErrors","updateSuccess","setUpdateSuccess","newName","setNewName","newEmail","setNewEmail","newPassword","setNewPassword","phoneNumber","setPhoneNumber","imageUrl","setImageUrl","profileImage","setProfileImage","navigate","fetchUser","userData","Error","localStorage","getItem","name","email","phone","initialImageUrl","profile_picture_url","err","_err$response","console","message","response","status","includes","validateForm","errors","trim","test","length","password","Object","keys","handleEdit","e","preventDefault","updatedData","responseData","refreshedUser","setTimeout","errorMessage","handleLogout","window","confirm","handleRetry","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","alt","onError","target","onerror","htmlFor","type","id","value","onChange","url","placeholder","disabled","created_at","Date","toLocaleDateString","onSubmit","required","currentImageUrl","_c","$RefreshReg$"],"sources":["C:/Users/KomPhone/Desktop/Parfumvilag2.0/Parfumvilag_2.0/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from \"react\"; // Import useContext\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getUser, updateUser } from \"../services/userService\";\r\nimport { AuthContext } from \"../App\"; // Import AuthContext\r\n\r\nconst Profile = () => {\r\n  const {\r\n    isLoggedIn,\r\n    user: contextUser,\r\n    login: contextLogin,\r\n    logout: contextLogout,\r\n  } = useContext(AuthContext); // Use context\r\n  const [user, setUser] = useState(contextUser); // Initialize with context user\r\n  const [loading, setLoading] = useState(!contextUser); // Only load if not already in context\r\n  const [editing, setEditing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n  const [updateSuccess, setUpdateSuccess] = useState(\"\"); // For success messages\r\n\r\n  // Form state - initialize with user data or empty strings\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(\"\"); // Only for URL input\r\n  const [profileImage, setProfileImage] = useState(\"\"); // For display\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch user data if not available in context or on explicit request\r\n  const fetchUser = useCallback(async () => {\r\n    if (!isLoggedIn) {\r\n      navigate(\"/bejelentkezes\"); // Redirect if not logged in\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const userData = await getUser(); // Fetch from backend\r\n      if (!userData) {\r\n        throw new Error(\"Nem sikerült lekérni a felhasználói adatokat.\");\r\n      }\r\n      setUser(userData); // Update local state\r\n      contextLogin(userData, localStorage.getItem(\"token\")); // Update context as well\r\n\r\n      // Initialize form state *after* user data is fetched\r\n      setNewName(userData.name || \"\");\r\n      setNewEmail(userData.email || \"\");\r\n      setPhoneNumber(userData.phone || \"\"); // Use DB field name\r\n      const initialImageUrl = userData.profile_picture_url || \"\"; // Use DB field name\r\n      setImageUrl(initialImageUrl);\r\n      setProfileImage(initialImageUrl); // Set display image\r\n    } catch (err) {\r\n      console.error(\"Profile fetch error:\", err);\r\n      setError(err.message || \"Hiba történt a profil betöltése közben.\");\r\n      setUser(null); // Clear user state on error\r\n      // Optionally log out if auth error\r\n      if (err.response?.status === 401 || err.message.includes(\"hitelesít\")) {\r\n        contextLogout();\r\n        navigate(\"/bejelentkezes\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isLoggedIn, navigate, contextLogin, contextLogout]); // Add dependencies\r\n\r\n  // Effect to fetch user data on mount if needed\r\n  useEffect(() => {\r\n    if (!user) {\r\n      // Fetch only if user is not already in state (from context)\r\n      fetchUser();\r\n    } else {\r\n      // If user is from context, initialize form state\r\n      setNewName(user.name || \"\");\r\n      setNewEmail(user.email || \"\");\r\n      setPhoneNumber(user.phone || \"\");\r\n      const initialImageUrl = user.profile_picture_url || \"\";\r\n      setImageUrl(initialImageUrl);\r\n      setProfileImage(initialImageUrl);\r\n      setLoading(false); // No loading needed if data is from context\r\n    }\r\n  }, [user, fetchUser]); // Depend on user state and fetchUser function\r\n\r\n  // Form Validation\r\n  const validateForm = useCallback(() => {\r\n    const errors = {};\r\n    if (!newName.trim()) errors.name = \"Név megadása kötelező!\";\r\n    if (!newEmail.trim()) {\r\n      errors.email = \"Email cím megadása kötelező!\";\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\r\n      errors.email = \"Érvénytelen email cím formátum!\";\r\n    }\r\n    if (newPassword && newPassword.length < 6) {\r\n      errors.password =\r\n        \"A jelszónak legalább 6 karakter hosszúnak kell lennie!\";\r\n    }\r\n    if (\r\n      phoneNumber &&\r\n      phoneNumber.trim() &&\r\n      !/^\\+?[0-9\\s-()]{7,}$/.test(phoneNumber)\r\n    ) {\r\n      // More lenient phone format\r\n      errors.phoneNumber = \"Érvénytelen telefonszám formátum!\";\r\n    }\r\n    if (imageUrl && imageUrl.trim() && !/^https?:\\/\\/.+\\..+/i.test(imageUrl)) {\r\n      errors.imageUrl =\r\n        \"Érvénytelen URL formátum! (http:// vagy https:// kell)\";\r\n    }\r\n    setValidationErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [newName, newEmail, newPassword, phoneNumber, imageUrl]);\r\n\r\n  // Handle profile update submission\r\n  const handleEdit = async (e) => {\r\n    e.preventDefault(); // Prevent default form submission\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setUpdateSuccess(\"\");\r\n\r\n    try {\r\n      // Prepare data object based on backend expectations\r\n      const updatedData = {\r\n        name: newName.trim(),\r\n        email: newEmail.trim(),\r\n        phone: phoneNumber.trim() || null, // Send null if empty\r\n        profile_picture_url: imageUrl.trim() || null, // Send null if empty\r\n      };\r\n      // Include password only if it's not empty\r\n      if (newPassword.trim()) {\r\n        updatedData.password = newPassword.trim();\r\n      }\r\n\r\n      // Call the updateUser service (ensure it sends JSON)\r\n      const responseData = await updateUser(updatedData);\r\n\r\n      // Update context and local state with potentially updated user data from response\r\n      // Assuming backend returns the updated user object (without password)\r\n      const refreshedUser = responseData.user || updatedData; // Use response if available\r\n      setUser(refreshedUser); // Update local state\r\n      contextLogin(refreshedUser, localStorage.getItem(\"token\")); // Update context\r\n\r\n      // Update display image and URL state from response or submitted data\r\n      setProfileImage(refreshedUser.profile_picture_url || \"\");\r\n      setImageUrl(refreshedUser.profile_picture_url || \"\");\r\n\r\n      setEditing(false); // Exit editing mode\r\n      setNewPassword(\"\"); // Clear password field\r\n      setUpdateSuccess(\"Adatok sikeresen frissítve!\");\r\n      setTimeout(() => setUpdateSuccess(\"\"), 4000); // Clear success message\r\n    } catch (err) {\r\n      console.error(\"Profile update error:\", err);\r\n      const errorMessage =\r\n        err.message || \"Hiba történt az adatok mentése közben.\";\r\n      setError(errorMessage);\r\n      // Optionally handle specific errors like duplicate email from backend\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Logout Handler\r\n  const handleLogout = () => {\r\n    if (window.confirm(\"Biztosan ki szeretne lépni?\")) {\r\n      contextLogout(); // Use context logout\r\n      navigate(\"/\"); // Redirect to home\r\n    }\r\n  };\r\n\r\n  // Retry Fetch Handler\r\n  const handleRetry = () => {\r\n    setError(\"\");\r\n    fetchUser(); // Retry fetching data\r\n  };\r\n\r\n  // --- Conditional Rendering based on state ---\r\n\r\n  if (loading && !user) {\r\n    // Show spinner only if loading initial data\r\n    return (\r\n      <div className=\"container text-center p-5\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Profil betöltése...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !user) {\r\n    // Show error prominently if initial fetch failed\r\n    return (\r\n      <div className=\"container py-5\">\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          <h4>Hiba</h4>\r\n          <p>{error}</p>\r\n          <button\r\n            className=\"btn btn-primary me-2\"\r\n            onClick={() => navigate(\"/bejelentkezes\")}\r\n          >\r\n            Bejelentkezés\r\n          </button>\r\n          <button className=\"btn btn-outline-secondary\" onClick={handleRetry}>\r\n            Újrapróbálás\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    // Should not happen if logic above is correct, but as a fallback\r\n    return (\r\n      <div className=\"container py-5 text-center\">\r\n        <p>Felhasználói adatok nem elérhetők. Kérjük, jelentkezzen be.</p>\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => navigate(\"/bejelentkezes\")}\r\n        >\r\n          Bejelentkezés\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Main Render ---\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <div className=\"profile-card\">\r\n        <h1 className=\"profile-title mb-4\">Profil</h1>\r\n\r\n        {/* Display Update Success/Error Messages */}\r\n        {updateSuccess && (\r\n          <div className=\"alert alert-success\">{updateSuccess}</div>\r\n        )}\r\n        {error && editing && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n        <div className=\"profile-content\">\r\n          {/* --- Image Section --- */}\r\n          <div className=\"profile-image-section\">\r\n            <img\r\n              src={\r\n                profileImage || \"https://via.placeholder.com/150?text=Profil\"\r\n              }\r\n              alt={`${user.name} profilképe`}\r\n              className=\"profile-image\"\r\n              // Simple error fallback\r\n              onError={(e) => {\r\n                e.target.onerror = null;\r\n                e.target.src = \"https://via.placeholder.com/150?text=Kép?\";\r\n              }}\r\n            />\r\n            {/* Image URL input only shown when editing */}\r\n            {editing && (\r\n              <div className=\"mt-3\">\r\n                <label htmlFor=\"profileImageUrl\" className=\"form-label\">\r\n                  Profilkép URL\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`form-control ${\r\n                    validationErrors.imageUrl ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"profileImageUrl\"\r\n                  value={imageUrl}\r\n                  onChange={(e) => {\r\n                    const url = e.target.value;\r\n                    setImageUrl(url);\r\n                    // Update display image preview immediately\r\n                    setProfileImage(url);\r\n                  }}\r\n                  placeholder=\"Kép URL-je (pl. https://...)\"\r\n                  aria-describedby=\"imageUrlError\"\r\n                  disabled={loading}\r\n                />\r\n                {validationErrors.imageUrl && (\r\n                  <div id=\"imageUrlError\" className=\"invalid-feedback\">\r\n                    {validationErrors.imageUrl}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* --- Details/Form Section --- */}\r\n          <h3 className=\"profile-subtitle mb-3\">Felhasználói adatok</h3>\r\n          {!editing ? (\r\n            // --- Display Mode ---\r\n            <div className=\"profile-details\">\r\n              <p>\r\n                <strong>Név:</strong> {user.name}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong> {user.email}\r\n              </p>\r\n              <p>\r\n                <strong>Telefonszám:</strong> {user.phone || \"Nincs megadva\"}\r\n              </p>\r\n              <p>\r\n                <strong>Regisztráció:</strong>{\" \"}\r\n                {user.created_at\r\n                  ? new Date(user.created_at).toLocaleDateString(\"hu-HU\")\r\n                  : \"Ismeretlen\"}\r\n              </p>\r\n              {/* Consider showing last updated from user object if backend provides it */}\r\n              {/* <p><strong>Utolsó frissítés:</strong> {user.updated_at ? new Date(user.updated_at).toLocaleString('hu-HU') : 'Ismeretlen'}</p> */}\r\n              <div className=\"profile-actions mt-4\">\r\n                <button\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={() => setEditing(true)}\r\n                >\r\n                  Adatok szerkesztése\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-danger ms-2\"\r\n                  onClick={handleLogout}\r\n                >\r\n                  Kilépés\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            // --- Editing Mode ---\r\n            <form id=\"profileForm\" onSubmit={handleEdit}>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editName\" className=\"form-label\">\r\n                  Név\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`form-control ${\r\n                    validationErrors.name ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editName\"\r\n                  value={newName}\r\n                  onChange={(e) => setNewName(e.target.value)}\r\n                  required\r\n                  aria-describedby=\"nameError\"\r\n                  disabled={loading}\r\n                />\r\n                {validationErrors.name && (\r\n                  <div id=\"nameError\" className=\"invalid-feedback\">\r\n                    {validationErrors.name}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editEmail\" className=\"form-label\">\r\n                  Email cím\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className={`form-control ${\r\n                    validationErrors.email ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editEmail\"\r\n                  value={newEmail}\r\n                  onChange={(e) => setNewEmail(e.target.value)}\r\n                  required\r\n                  aria-describedby=\"emailError\"\r\n                  disabled={loading}\r\n                />\r\n                {validationErrors.email && (\r\n                  <div id=\"emailError\" className=\"invalid-feedback\">\r\n                    {validationErrors.email}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editPassword\" className=\"form-label\">\r\n                  Új jelszó (üresen hagyva nem változik)\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  className={`form-control ${\r\n                    validationErrors.password ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editPassword\"\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                  aria-describedby=\"passwordError\"\r\n                  placeholder=\"Min. 6 karakter\"\r\n                  disabled={loading}\r\n                />\r\n                {validationErrors.password && (\r\n                  <div id=\"passwordError\" className=\"invalid-feedback\">\r\n                    {validationErrors.password}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"editPhoneNumber\" className=\"form-label\">\r\n                  Telefonszám (opcionális)\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  className={`form-control ${\r\n                    validationErrors.phoneNumber ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                  id=\"editPhoneNumber\"\r\n                  value={phoneNumber}\r\n                  onChange={(e) => setPhoneNumber(e.target.value)}\r\n                  placeholder=\"Pl. +36 30 123 4567\"\r\n                  aria-describedby=\"phoneNumberError\"\r\n                  disabled={loading}\r\n                />\r\n                {validationErrors.phoneNumber && (\r\n                  <div id=\"phoneNumberError\" className=\"invalid-feedback\">\r\n                    {validationErrors.phoneNumber}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"profile-actions mt-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <span\r\n                        className=\"spinner-border spinner-border-sm me-2\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                      ></span>\r\n                      Mentés...\r\n                    </>\r\n                  ) : (\r\n                    \"Mentés\"\r\n                  )}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-outline-secondary ms-2\"\r\n                  onClick={() => {\r\n                    setEditing(false);\r\n                    // Reset form fields to original user data\r\n                    setNewName(user.name || \"\");\r\n                    setNewEmail(user.email || \"\");\r\n                    setPhoneNumber(user.phone || \"\");\r\n                    const currentImageUrl = user.profile_picture_url || \"\";\r\n                    setImageUrl(currentImageUrl);\r\n                    setProfileImage(currentImageUrl);\r\n                    setNewPassword(\"\"); // Clear password field\r\n                    setValidationErrors({}); // Clear validation errors\r\n                    setError(\"\"); // Clear general error\r\n                  }}\r\n                  disabled={loading}\r\n                >\r\n                  Mégse\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,UAAU,QAAQ,OAAO,CAAC,CAAC;AAC7E,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,EAAEC,UAAU,QAAQ,yBAAyB;AAC7D,SAASC,WAAW,QAAQ,QAAQ,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtC,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM;IACJC,UAAU;IACVC,IAAI,EAAEC,WAAW;IACjBC,KAAK,EAAEC,YAAY;IACnBC,MAAM,EAAEC;EACV,CAAC,GAAGjB,UAAU,CAACI,WAAW,CAAC,CAAC,CAAC;EAC7B,MAAM,CAACQ,IAAI,EAAEM,OAAO,CAAC,GAAGrB,QAAQ,CAACgB,WAAW,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,CAACgB,WAAW,CAAC,CAAC,CAAC;EACtD,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC4B,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG7B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5D,MAAM,CAAC8B,aAAa,EAAEC,gBAAgB,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAExD;EACA,MAAM,CAACgC,OAAO,EAAEC,UAAU,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACkC,QAAQ,EAAEC,WAAW,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACoC,WAAW,EAAEC,cAAc,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwC,QAAQ,EAAEC,WAAW,CAAC,GAAGzC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAM,CAAC0C,YAAY,EAAEC,eAAe,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEtD,MAAM4C,QAAQ,GAAGxC,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMyC,SAAS,GAAG3C,WAAW,CAAC,YAAY;IACxC,IAAI,CAACY,UAAU,EAAE;MACf8B,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;MAC5B;IACF;IACArB,UAAU,CAAC,IAAI,CAAC;IAChBI,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACF,MAAMmB,QAAQ,GAAG,MAAMzC,OAAO,CAAC,CAAC,CAAC,CAAC;MAClC,IAAI,CAACyC,QAAQ,EAAE;QACb,MAAM,IAAIC,KAAK,CAAC,+CAA+C,CAAC;MAClE;MACA1B,OAAO,CAACyB,QAAQ,CAAC,CAAC,CAAC;MACnB5B,YAAY,CAAC4B,QAAQ,EAAEE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;MAEvD;MACAhB,UAAU,CAACa,QAAQ,CAACI,IAAI,IAAI,EAAE,CAAC;MAC/Bf,WAAW,CAACW,QAAQ,CAACK,KAAK,IAAI,EAAE,CAAC;MACjCZ,cAAc,CAACO,QAAQ,CAACM,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC;MACtC,MAAMC,eAAe,GAAGP,QAAQ,CAACQ,mBAAmB,IAAI,EAAE,CAAC,CAAC;MAC5Db,WAAW,CAACY,eAAe,CAAC;MAC5BV,eAAe,CAACU,eAAe,CAAC,CAAC,CAAC;IACpC,CAAC,CAAC,OAAOE,GAAG,EAAE;MAAA,IAAAC,aAAA;MACZC,OAAO,CAAC/B,KAAK,CAAC,sBAAsB,EAAE6B,GAAG,CAAC;MAC1C5B,QAAQ,CAAC4B,GAAG,CAACG,OAAO,IAAI,yCAAyC,CAAC;MAClErC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;MACf;MACA,IAAI,EAAAmC,aAAA,GAAAD,GAAG,CAACI,QAAQ,cAAAH,aAAA,uBAAZA,aAAA,CAAcI,MAAM,MAAK,GAAG,IAAIL,GAAG,CAACG,OAAO,CAACG,QAAQ,CAAC,WAAW,CAAC,EAAE;QACrEzC,aAAa,CAAC,CAAC;QACfwB,QAAQ,CAAC,gBAAgB,CAAC;MAC5B;IACF,CAAC,SAAS;MACRrB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACT,UAAU,EAAE8B,QAAQ,EAAE1B,YAAY,EAAEE,aAAa,CAAC,CAAC,CAAC,CAAC;;EAEzD;EACAnB,SAAS,CAAC,MAAM;IACd,IAAI,CAACc,IAAI,EAAE;MACT;MACA8B,SAAS,CAAC,CAAC;IACb,CAAC,MAAM;MACL;MACAZ,UAAU,CAAClB,IAAI,CAACmC,IAAI,IAAI,EAAE,CAAC;MAC3Bf,WAAW,CAACpB,IAAI,CAACoC,KAAK,IAAI,EAAE,CAAC;MAC7BZ,cAAc,CAACxB,IAAI,CAACqC,KAAK,IAAI,EAAE,CAAC;MAChC,MAAMC,eAAe,GAAGtC,IAAI,CAACuC,mBAAmB,IAAI,EAAE;MACtDb,WAAW,CAACY,eAAe,CAAC;MAC5BV,eAAe,CAACU,eAAe,CAAC;MAChC9B,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACrB;EACF,CAAC,EAAE,CAACR,IAAI,EAAE8B,SAAS,CAAC,CAAC,CAAC,CAAC;;EAEvB;EACA,MAAMiB,YAAY,GAAG5D,WAAW,CAAC,MAAM;IACrC,MAAM6D,MAAM,GAAG,CAAC,CAAC;IACjB,IAAI,CAAC/B,OAAO,CAACgC,IAAI,CAAC,CAAC,EAAED,MAAM,CAACb,IAAI,GAAG,wBAAwB;IAC3D,IAAI,CAAChB,QAAQ,CAAC8B,IAAI,CAAC,CAAC,EAAE;MACpBD,MAAM,CAACZ,KAAK,GAAG,8BAA8B;IAC/C,CAAC,MAAM,IAAI,CAAC,4BAA4B,CAACc,IAAI,CAAC/B,QAAQ,CAAC,EAAE;MACvD6B,MAAM,CAACZ,KAAK,GAAG,iCAAiC;IAClD;IACA,IAAIf,WAAW,IAAIA,WAAW,CAAC8B,MAAM,GAAG,CAAC,EAAE;MACzCH,MAAM,CAACI,QAAQ,GACb,wDAAwD;IAC5D;IACA,IACE7B,WAAW,IACXA,WAAW,CAAC0B,IAAI,CAAC,CAAC,IAClB,CAAC,qBAAqB,CAACC,IAAI,CAAC3B,WAAW,CAAC,EACxC;MACA;MACAyB,MAAM,CAACzB,WAAW,GAAG,mCAAmC;IAC1D;IACA,IAAIE,QAAQ,IAAIA,QAAQ,CAACwB,IAAI,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAACC,IAAI,CAACzB,QAAQ,CAAC,EAAE;MACxEuB,MAAM,CAACvB,QAAQ,GACb,wDAAwD;IAC5D;IACAX,mBAAmB,CAACkC,MAAM,CAAC;IAC3B,OAAOK,MAAM,CAACC,IAAI,CAACN,MAAM,CAAC,CAACG,MAAM,KAAK,CAAC;EACzC,CAAC,EAAE,CAAClC,OAAO,EAAEE,QAAQ,EAAEE,WAAW,EAAEE,WAAW,EAAEE,QAAQ,CAAC,CAAC;;EAE3D;EACA,MAAM8B,UAAU,GAAG,MAAOC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;IACpB,IAAI,CAACV,YAAY,CAAC,CAAC,EAAE;IAErBvC,UAAU,CAAC,IAAI,CAAC;IAChBI,QAAQ,CAAC,EAAE,CAAC;IACZI,gBAAgB,CAAC,EAAE,CAAC;IAEpB,IAAI;MACF;MACA,MAAM0C,WAAW,GAAG;QAClBvB,IAAI,EAAElB,OAAO,CAACgC,IAAI,CAAC,CAAC;QACpBb,KAAK,EAAEjB,QAAQ,CAAC8B,IAAI,CAAC,CAAC;QACtBZ,KAAK,EAAEd,WAAW,CAAC0B,IAAI,CAAC,CAAC,IAAI,IAAI;QAAE;QACnCV,mBAAmB,EAAEd,QAAQ,CAACwB,IAAI,CAAC,CAAC,IAAI,IAAI,CAAE;MAChD,CAAC;MACD;MACA,IAAI5B,WAAW,CAAC4B,IAAI,CAAC,CAAC,EAAE;QACtBS,WAAW,CAACN,QAAQ,GAAG/B,WAAW,CAAC4B,IAAI,CAAC,CAAC;MAC3C;;MAEA;MACA,MAAMU,YAAY,GAAG,MAAMpE,UAAU,CAACmE,WAAW,CAAC;;MAElD;MACA;MACA,MAAME,aAAa,GAAGD,YAAY,CAAC3D,IAAI,IAAI0D,WAAW,CAAC,CAAC;MACxDpD,OAAO,CAACsD,aAAa,CAAC,CAAC,CAAC;MACxBzD,YAAY,CAACyD,aAAa,EAAE3B,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;MAE5D;MACAN,eAAe,CAACgC,aAAa,CAACrB,mBAAmB,IAAI,EAAE,CAAC;MACxDb,WAAW,CAACkC,aAAa,CAACrB,mBAAmB,IAAI,EAAE,CAAC;MAEpD7B,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;MACnBY,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;MACpBN,gBAAgB,CAAC,6BAA6B,CAAC;MAC/C6C,UAAU,CAAC,MAAM7C,gBAAgB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAChD,CAAC,CAAC,OAAOwB,GAAG,EAAE;MACZE,OAAO,CAAC/B,KAAK,CAAC,uBAAuB,EAAE6B,GAAG,CAAC;MAC3C,MAAMsB,YAAY,GAChBtB,GAAG,CAACG,OAAO,IAAI,wCAAwC;MACzD/B,QAAQ,CAACkD,YAAY,CAAC;MACtB;IACF,CAAC,SAAS;MACRtD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMuD,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIC,MAAM,CAACC,OAAO,CAAC,6BAA6B,CAAC,EAAE;MACjD5D,aAAa,CAAC,CAAC,CAAC,CAAC;MACjBwB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACjB;EACF,CAAC;;EAED;EACA,MAAMqC,WAAW,GAAGA,CAAA,KAAM;IACxBtD,QAAQ,CAAC,EAAE,CAAC;IACZkB,SAAS,CAAC,CAAC,CAAC,CAAC;EACf,CAAC;;EAED;;EAEA,IAAIvB,OAAO,IAAI,CAACP,IAAI,EAAE;IACpB;IACA,oBACEN,OAAA;MAAKyE,SAAS,EAAC,2BAA2B;MAAAC,QAAA,eACxC1E,OAAA;QAAKyE,SAAS,EAAC,6BAA6B;QAACE,IAAI,EAAC,QAAQ;QAAAD,QAAA,eACxD1E,OAAA;UAAMyE,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAAmB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI9D,KAAK,IAAI,CAACX,IAAI,EAAE;IAClB;IACA,oBACEN,OAAA;MAAKyE,SAAS,EAAC,gBAAgB;MAAAC,QAAA,eAC7B1E,OAAA;QAAKyE,SAAS,EAAC,oBAAoB;QAACE,IAAI,EAAC,OAAO;QAAAD,QAAA,gBAC9C1E,OAAA;UAAA0E,QAAA,EAAI;QAAI;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACb/E,OAAA;UAAA0E,QAAA,EAAIzD;QAAK;UAAA2D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACd/E,OAAA;UACEyE,SAAS,EAAC,sBAAsB;UAChCO,OAAO,EAAEA,CAAA,KAAM7C,QAAQ,CAAC,gBAAgB,CAAE;UAAAuC,QAAA,EAC3C;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT/E,OAAA;UAAQyE,SAAS,EAAC,2BAA2B;UAACO,OAAO,EAAER,WAAY;UAAAE,QAAA,EAAC;QAEpE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI,CAACzE,IAAI,EAAE;IACT;IACA,oBACEN,OAAA;MAAKyE,SAAS,EAAC,4BAA4B;MAAAC,QAAA,gBACzC1E,OAAA;QAAA0E,QAAA,EAAG;MAA2D;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAClE/E,OAAA;QACEyE,SAAS,EAAC,iBAAiB;QAC3BO,OAAO,EAAEA,CAAA,KAAM7C,QAAQ,CAAC,gBAAgB,CAAE;QAAAuC,QAAA,EAC3C;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;;EAEA;EACA,oBACE/E,OAAA;IAAKyE,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC7B1E,OAAA;MAAKyE,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3B1E,OAAA;QAAIyE,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAM;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAG7C1D,aAAa,iBACZrB,OAAA;QAAKyE,SAAS,EAAC,qBAAqB;QAAAC,QAAA,EAAErD;MAAa;QAAAuD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAC1D,EACA9D,KAAK,IAAIF,OAAO,iBAAIf,OAAA;QAAKyE,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAEzD;MAAK;QAAA2D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAEtE/E,OAAA;QAAKyE,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAE9B1E,OAAA;UAAKyE,SAAS,EAAC,uBAAuB;UAAAC,QAAA,gBACpC1E,OAAA;YACEiF,GAAG,EACDhD,YAAY,IAAI,6CACjB;YACDiD,GAAG,EAAE,GAAG5E,IAAI,CAACmC,IAAI,aAAc;YAC/BgC,SAAS,EAAC;YACV;YAAA;YACAU,OAAO,EAAGrB,CAAC,IAAK;cACdA,CAAC,CAACsB,MAAM,CAACC,OAAO,GAAG,IAAI;cACvBvB,CAAC,CAACsB,MAAM,CAACH,GAAG,GAAG,2CAA2C;YAC5D;UAAE;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAEDhE,OAAO,iBACNf,OAAA;YAAKyE,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB1E,OAAA;cAAOsF,OAAO,EAAC,iBAAiB;cAACb,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAExD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/E,OAAA;cACEuF,IAAI,EAAC,MAAM;cACXd,SAAS,EAAE,gBACTtD,gBAAgB,CAACY,QAAQ,GAAG,YAAY,GAAG,EAAE,EAC5C;cACHyD,EAAE,EAAC,iBAAiB;cACpBC,KAAK,EAAE1D,QAAS;cAChB2D,QAAQ,EAAG5B,CAAC,IAAK;gBACf,MAAM6B,GAAG,GAAG7B,CAAC,CAACsB,MAAM,CAACK,KAAK;gBAC1BzD,WAAW,CAAC2D,GAAG,CAAC;gBAChB;gBACAzD,eAAe,CAACyD,GAAG,CAAC;cACtB,CAAE;cACFC,WAAW,EAAC,iCAA8B;cAC1C,oBAAiB,eAAe;cAChCC,QAAQ,EAAEhF;YAAQ;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACD5D,gBAAgB,CAACY,QAAQ,iBACxB/B,OAAA;cAAKwF,EAAE,EAAC,eAAe;cAACf,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EACjDvD,gBAAgB,CAACY;YAAQ;cAAA6C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAGN/E,OAAA;UAAIyE,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAAmB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC7D,CAAChE,OAAO;QAAA;QACP;QACAf,OAAA;UAAKyE,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9B1E,OAAA;YAAA0E,QAAA,gBACE1E,OAAA;cAAA0E,QAAA,EAAQ;YAAI;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACzE,IAAI,CAACmC,IAAI;UAAA;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B,CAAC,eACJ/E,OAAA;YAAA0E,QAAA,gBACE1E,OAAA;cAAA0E,QAAA,EAAQ;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACzE,IAAI,CAACoC,KAAK;UAAA;YAAAkC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC,eACJ/E,OAAA;YAAA0E,QAAA,gBACE1E,OAAA;cAAA0E,QAAA,EAAQ;YAAY;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACzE,IAAI,CAACqC,KAAK,IAAI,eAAe;UAAA;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC,eACJ/E,OAAA;YAAA0E,QAAA,gBACE1E,OAAA;cAAA0E,QAAA,EAAQ;YAAa;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAAC,GAAG,EACjCzE,IAAI,CAACwF,UAAU,GACZ,IAAIC,IAAI,CAACzF,IAAI,CAACwF,UAAU,CAAC,CAACE,kBAAkB,CAAC,OAAO,CAAC,GACrD,YAAY;UAAA;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,eAGJ/E,OAAA;YAAKyE,SAAS,EAAC,sBAAsB;YAAAC,QAAA,gBACnC1E,OAAA;cACEyE,SAAS,EAAC,yBAAyB;cACnCO,OAAO,EAAEA,CAAA,KAAMhE,UAAU,CAAC,IAAI,CAAE;cAAA0D,QAAA,EACjC;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT/E,OAAA;cACEyE,SAAS,EAAC,6BAA6B;cACvCO,OAAO,EAAEX,YAAa;cAAAK,QAAA,EACvB;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;QAAA;QAEN;QACA/E,OAAA;UAAMwF,EAAE,EAAC,aAAa;UAACS,QAAQ,EAAEpC,UAAW;UAAAa,QAAA,gBAC1C1E,OAAA;YAAKyE,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB1E,OAAA;cAAOsF,OAAO,EAAC,UAAU;cAACb,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAEjD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/E,OAAA;cACEuF,IAAI,EAAC,MAAM;cACXd,SAAS,EAAE,gBACTtD,gBAAgB,CAACsB,IAAI,GAAG,YAAY,GAAG,EAAE,EACxC;cACH+C,EAAE,EAAC,UAAU;cACbC,KAAK,EAAElE,OAAQ;cACfmE,QAAQ,EAAG5B,CAAC,IAAKtC,UAAU,CAACsC,CAAC,CAACsB,MAAM,CAACK,KAAK,CAAE;cAC5CS,QAAQ;cACR,oBAAiB,WAAW;cAC5BL,QAAQ,EAAEhF;YAAQ;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACD5D,gBAAgB,CAACsB,IAAI,iBACpBzC,OAAA;cAAKwF,EAAE,EAAC,WAAW;cAACf,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EAC7CvD,gBAAgB,CAACsB;YAAI;cAAAmC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eACN/E,OAAA;YAAKyE,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB1E,OAAA;cAAOsF,OAAO,EAAC,WAAW;cAACb,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAElD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/E,OAAA;cACEuF,IAAI,EAAC,OAAO;cACZd,SAAS,EAAE,gBACTtD,gBAAgB,CAACuB,KAAK,GAAG,YAAY,GAAG,EAAE,EACzC;cACH8C,EAAE,EAAC,WAAW;cACdC,KAAK,EAAEhE,QAAS;cAChBiE,QAAQ,EAAG5B,CAAC,IAAKpC,WAAW,CAACoC,CAAC,CAACsB,MAAM,CAACK,KAAK,CAAE;cAC7CS,QAAQ;cACR,oBAAiB,YAAY;cAC7BL,QAAQ,EAAEhF;YAAQ;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACD5D,gBAAgB,CAACuB,KAAK,iBACrB1C,OAAA;cAAKwF,EAAE,EAAC,YAAY;cAACf,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EAC9CvD,gBAAgB,CAACuB;YAAK;cAAAkC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eACN/E,OAAA;YAAKyE,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB1E,OAAA;cAAOsF,OAAO,EAAC,cAAc;cAACb,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAErD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/E,OAAA;cACEuF,IAAI,EAAC,UAAU;cACfd,SAAS,EAAE,gBACTtD,gBAAgB,CAACuC,QAAQ,GAAG,YAAY,GAAG,EAAE,EAC5C;cACH8B,EAAE,EAAC,cAAc;cACjBC,KAAK,EAAE9D,WAAY;cACnB+D,QAAQ,EAAG5B,CAAC,IAAKlC,cAAc,CAACkC,CAAC,CAACsB,MAAM,CAACK,KAAK,CAAE;cAChD,oBAAiB,eAAe;cAChCG,WAAW,EAAC,iBAAiB;cAC7BC,QAAQ,EAAEhF;YAAQ;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACD5D,gBAAgB,CAACuC,QAAQ,iBACxB1D,OAAA;cAAKwF,EAAE,EAAC,eAAe;cAACf,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EACjDvD,gBAAgB,CAACuC;YAAQ;cAAAkB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eACN/E,OAAA;YAAKyE,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB1E,OAAA;cAAOsF,OAAO,EAAC,iBAAiB;cAACb,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAExD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/E,OAAA;cACEuF,IAAI,EAAC,KAAK;cACVd,SAAS,EAAE,gBACTtD,gBAAgB,CAACU,WAAW,GAAG,YAAY,GAAG,EAAE,EAC/C;cACH2D,EAAE,EAAC,iBAAiB;cACpBC,KAAK,EAAE5D,WAAY;cACnB6D,QAAQ,EAAG5B,CAAC,IAAKhC,cAAc,CAACgC,CAAC,CAACsB,MAAM,CAACK,KAAK,CAAE;cAChDG,WAAW,EAAC,qBAAqB;cACjC,oBAAiB,kBAAkB;cACnCC,QAAQ,EAAEhF;YAAQ;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACD5D,gBAAgB,CAACU,WAAW,iBAC3B7B,OAAA;cAAKwF,EAAE,EAAC,kBAAkB;cAACf,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EACpDvD,gBAAgB,CAACU;YAAW;cAAA+C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1B,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eACN/E,OAAA;YAAKyE,SAAS,EAAC,sBAAsB;YAAAC,QAAA,gBACnC1E,OAAA;cACEuF,IAAI,EAAC,QAAQ;cACbd,SAAS,EAAC,iBAAiB;cAC3BoB,QAAQ,EAAEhF,OAAQ;cAAA6D,QAAA,EAEjB7D,OAAO,gBACNb,OAAA,CAAAE,SAAA;gBAAAwE,QAAA,gBACE1E,OAAA;kBACEyE,SAAS,EAAC,uCAAuC;kBACjDE,IAAI,EAAC,QAAQ;kBACb,eAAY;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb,CAAC,gBAEV;cAAA,eAAE,CAAC,GAEH;YACD;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eACT/E,OAAA;cACEuF,IAAI,EAAC,QAAQ;cACbd,SAAS,EAAC,gCAAgC;cAC1CO,OAAO,EAAEA,CAAA,KAAM;gBACbhE,UAAU,CAAC,KAAK,CAAC;gBACjB;gBACAQ,UAAU,CAAClB,IAAI,CAACmC,IAAI,IAAI,EAAE,CAAC;gBAC3Bf,WAAW,CAACpB,IAAI,CAACoC,KAAK,IAAI,EAAE,CAAC;gBAC7BZ,cAAc,CAACxB,IAAI,CAACqC,KAAK,IAAI,EAAE,CAAC;gBAChC,MAAMwD,eAAe,GAAG7F,IAAI,CAACuC,mBAAmB,IAAI,EAAE;gBACtDb,WAAW,CAACmE,eAAe,CAAC;gBAC5BjE,eAAe,CAACiE,eAAe,CAAC;gBAChCvE,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpBR,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzBF,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;cAChB,CAAE;cACF2E,QAAQ,EAAEhF,OAAQ;cAAA6D,QAAA,EACnB;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CACP;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC3E,EAAA,CArcID,OAAO;EAAA,QAsBMR,WAAW;AAAA;AAAAyG,EAAA,GAtBxBjG,OAAO;AAucb,eAAeA,OAAO;AAAC,IAAAiG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}